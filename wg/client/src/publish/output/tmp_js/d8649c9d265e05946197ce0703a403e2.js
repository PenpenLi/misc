EmptyFieldTargetSpec=Class.extern(function(){this.isSatisfiedBy=function(a){return a?a.objType==OBJ_TYPE.NONE:!1},this.getInvalidTip=function(){return rstr.selectexpedtarget.err.noEmptyFieldTarget}}),InputCoodDlg=Class.extern(function(){var a,b,c,d={},e,f="",g={min:0,max:C_OUTFIELD_COL_GRIDS-1},h={min:0,max:C_OUTFIELD_ROW_GRIDS-1},i="";this.init=function(c){a=c,b=this},this.openDlg=function(a,b,c,d){j(a,b,c,d),k(),l(),m(),n()},this.setCaller=function(a){e=a},this.isShow=function(){return c?c.isShow():!1},this.click=function(){s()};var j=function(a,b,c,d){f=a,g=b,h=c,i=d},k=function(){if(c)return;o(),p()},l=function(){c.show()},m=function(){TQ.setTextEx(d.name,f)},n=function(){d.cood_x.focus()},o=function(){c=Dialog.snew(a,{modal:!0,pos:{x:"center",y:60},uiback:uiback.dlg.npc,btns:[{btn:{id:0,text:rstr.comm.confirm},caller:{self:b,caller:s}},{btn:{id:0,text:rstr.comm.cancel},caller:{self:b,caller:t}}]}),a.getGUI().initDlg(c,uicfg.comm.cooddlg,d),c.hide()},p=function(){d.favoriteBtn.setCaller({self:b,caller:u}),d.cood_x.setLimit(q),d.cood_y.setLimit(r)},q=function(){return{min:0,max:g.max}},r=function(){return{min:0,max:h.max}},s=function(){var b={x:d.cood_x.getVal(),y:d.cood_y.getVal()};if(!w(b)){a.getGUI().sysMsgTips(SMT_WARNING,i);return}if(e){var f=d.cood_x.getVal(),g=d.cood_y.getVal();e.caller.call(e.self,b.x,b.y)}c.hide()},t=function(){c.hide()},u=function(){var a=UIM.getDlg("selectexpedtarget");a.setCaller({self:b,caller:v}),a.openDlg(EmptyFieldTargetSpec.snew(),{tabIdx:1,typeListIdx:0})},v=function(a){var b=FieldUtil.getPosByGridId(a.gridId);d.cood_x.setVal(b.x),d.cood_y.setVal(b.y)},w=function(a){return a.x>=g.min&&a.x<=g.max&&a.y>=h.min&&a.y<=h.max}})