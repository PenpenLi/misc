CreateWorldMapObjs=CreateMapObjs.extern(function(){this.setMyCity=function(a){this.mycityid=a},this.filter=function(a){for(var b=0;b<a.length;++b){var c=a[b];this.objs.push({id:c.id,itemres:c.itemres,pos:{x:c.itemres.pos.x,y:c.itemres.pos.y}})}},this.getResId=function(a){return this.mycityid==a?1002:1001}}),BaseDlgEx=Class.extern(function(){this.isShow=function(){return this.dlg.isShow()}}),WorldMapDlg=BaseDlgEx.extern(function(){var a=null,b=null,c={},d=null;this.init=function(c){b=this,a=c,this.dlg=null},this.openDlg=function(){e()},this.clickCity=function(a){d.clickObj(a)};var e=function(){b.dlg?b.dlg.show():(b.dlg=Dialog.snew(a,{modal:!0,uiback:uiback.dlg.minihelp,title:rstr.worldmapdlg.title,pos:{x:"center",y:10}}),a.getGUI().initDlg(b.dlg,uicfg.worldmapdlg,c),f(),d=CreateWorldMapObjs.snew(a,c.worldmap,{self:b,caller:g}),d.setMyCity(a.getImgr().getRoleRes().cityid),d.load(res_map_worlds.list))},f=function(){var a=ItemResUtil.findItemres(FIXID.WORLDMAP);IMG.setBKImage(c.worldmap,IMG.makeImg("map/"+a.img))},g=function(c){MapSender.sendEnterCity(a,c),b.dlg.hide()}})