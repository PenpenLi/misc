FixTimer=Class.extern(function(){this.g_=null,this.regs_=[],this.date_=new Date,this.initOneTime=function(a){this.g_=a,this.g_.regUpdater(this,this._onUpdater,1e3)},this.regTimer=function(a,b){for(var c=0;c<this.regs_.length;++c){var d=this.regs_[c];if(d.caller.self==b.self&&d.caller.caller==b.caller){log("duplicate fixTime regTimer");return}}this.regs_.push({caller:b,fixTimeVal:this._getTimeVal(a.hour,a.min,a.sec),refreshTime:0})},this.unregTimer=function(a){for(var b=0;b<this.regs_.length;++b){var c=this.regs_[b];if(c.caller.self==a.self&&c.caller.caller==a.caller){this.regs_.splice(b,1);break}}},this.clear=function(){this.regs_=[],this.g_.unregUpdater(this,this._onUpdater)},this._onUpdater=function(){for(var a=0;a<this.regs_.length;++a){var b=this.regs_[a],c=this.g_.getSvrTimeS();if(TQ.isSameDay(c,b.refreshTime))continue;this.date_.setTime(c*1e3);var d=this._getTimeVal(this.date_.getHours(),this.date_.getMinutes(),this.date_.getSeconds());if(d<b.fixTimeVal)continue;b.refreshTime=c,b.caller.caller.call(b.caller.self)}},this._getTimeVal=function(a,b,c){return a*3600+b*60+c}}).snew()