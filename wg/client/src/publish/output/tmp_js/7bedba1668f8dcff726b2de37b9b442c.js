FaceUtil=Class.extern(function(){this.facetips=["#愤怒","#生气","#汗","#耍宝","#大笑","#得瑟","#捏脸","#晕","#吐","#害羞","#惊讶","#偷笑","#亲亲","#无辜","#委屈","#酷","#坏笑","#鼓掌","#抠鼻","#抓狂","#享受","#哭","#喜欢","#鄙视","#阴险"];var a=2;this.init=function(a){this.g=a},this.getFaceCount=function(){return this.facetips.length},this.getFaceTip=function(a){return this.facetips[a]},this.faceFormat=function(b){var c=IMG.getMode();for(var d=0,e=this.facetips.length;d<e;++d){var f=d+1,g='<img width=35 height=35 align="middle" src="'+IMG.makeImg("chat/face/01/"+TQ.formatNumber(d+1,a)+".gif")+'"/>';b=b.replace(new RegExp(this.facetips[d],"g"),g)}return b}}),FacePanel=Class.extern(function(){var a,b,c,d,e={},f=uiback.dlg.minihelp,g=null;this.init=function(c){a=c,b=this,g=FaceUtil.snew(a)},this.setCaller=function(a){d=a},this.show=function(a){h(),c.show(a);var b=e.list.getItem(6),d=b.exsubs.face},this.getSize=function(){return h(),{cx:c.getWidth(),cy:c.getHeight()}};var h=function(){if(!c){c=new PopPanel(a,{});var d=c.getDom(),h=a.getGUI();h.initPanel(d,uicfg.facepanel,e),m_panelback=h.createPanelUIBack(d,f);var l=TQ.getDomWidth(d),m=TQ.getDomHeight(d);h.setUIBack(m_panelback,l,m,f.type),e.list.setItemCount(g.getFaceCount());for(var n=0,o=e.list.getCount();n<o;++n){var p=e.list.getItem(n);k(n);var q=e.list.getSubItem(p,"tooltips").$item,r=TTIP.getTipById(q);r.setCaller({self:b,caller:j}),r.setData({idx:n})}e.list.setCaller({self:b,caller:i}),c.hide()}},i=function(a,b){c.hide(),d&&d.caller.call(d.self,{face:g.getFaceTip(b)})},j=function(a){return g.getFaceTip(a.idx)},k=function(a){var b=e.list.getItem(a);IMG.setBKImage(b.exsubs.face,IMG.makeFaceImg(1,1,a+1))}}),FacePanelBtn=Class.extern(function(){var a,b,c,d,e;this.init=function(c,d,e){a=c,b=this,f(d,e)},this.setCaller=function(a){e=a};var f=function(e,f){f||(f={}),f.uiback||(TQ.isMobile()?f.uiback=uiback.mb.facebtn:f.uiback=uiback.btn.face),c=new ComButton(a,e,f),c.setCaller({self:b,caller:g}),d=FacePanel.snew(a),d.setCaller({self:b,caller:h})},g=function(){a.getGUI().showBtnPanel(0,c.getDom(),d)},h=function(a){e&&e.caller.call(e.self,a)}})