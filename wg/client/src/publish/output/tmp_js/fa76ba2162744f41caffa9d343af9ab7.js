RoleAchievement=Class.extern(function(){this.g_=null,this.items_={},this.role_=null,this.init=function(a,b){this.g_=a,this._createList(b)},this.setRole=function(a){this.role_=a,this.items_.list.setItemCount(4),this._setCityLevel(this.items_.list.getItem(0),a.cityMaxLevel),this._setActTowerLevel(this.items_.list.getItem(1),a.actTower),this._setActTerraceLevel(this.items_.list.getItem(2),a.actTerrace),this._setVipLevel(this.items_.list.getItem(3),a.vip),this._setTipCaller()},this._createList=function(a){var b=uicfg.roledlg.t_,c=b[1];this.g_.getGUI().buildDomItems(a,c,b,this.items_)},this._setTipCaller=function(){TTIP.setCallerData(this.items_.list.getItem(0).exsubs.tooltips[TIP_PREFIX+"item"],{self:this,caller:this._onGetCityLevelTip},{}),TTIP.setCallerData(this.items_.list.getItem(1).exsubs.tooltips[TIP_PREFIX+"item"],{self:this,caller:this._onGetActTowerTip},{}),TTIP.setCallerData(this.items_.list.getItem(2).exsubs.tooltips[TIP_PREFIX+"item"],{self:this,caller:this._onGetActTerraceTip},{}),TTIP.setCallerData(this.items_.list.getItem(3).exsubs.tooltips[TIP_PREFIX+"item"],{self:this,caller:this._onGetVipTip},{})},this._setCityLevel=function(a,b){var c=0,d=0;b>0&&(c=Math.floor((b-1)/5)+1,d=(b-1)%5+1),IMG.setBKImage(a.exsubs.icon,IMG.getCityBigLevelIcon(c)),TQ.setHtml(a.exsubs.num,IMG.getImgNumber("com",d))},this._setActTowerLevel=function(a,b){var c=Math.floor(b/10),d=c>0;IMG.setBKImage(a.exsubs.icon,IMG.getActTowerIcon(d)),TQ.setHtml(a.exsubs.num,IMG.getImgNumber("com",c))},this._setActTerraceLevel=function(a,b){var c=b>0;IMG.setBKImage(a.exsubs.icon,IMG.getActTerraceIcon(c)),TQ.setHtml(a.exsubs.num,IMG.getImgNumber("com",b))},this._setVipLevel=function(a,b){var c=b>0;IMG.setBKImage(a.exsubs.icon,IMG.getVipIcon(c)),TQ.setHtml(a.exsubs.num,IMG.getImgNumber("com",b))},this._onGetCityLevelTip=function(){var a=TQ.qfind(res_citylevelneeds,"level",this.role_.cityMaxLevel);return TQ.format(rstr.roledlg.tips.citylevel,a.name)},this._onGetActTowerTip=function(){var a=Math.floor(this.role_.actTower/10)*10;return TQ.format(rstr.roledlg.tips.passtower,a)},this._onGetActTerraceTip=function(){if(this.role_.actTerrace==0)return rstr.roledlg.tips.nopassterrace;var a=res_terrace[this.role_.actTerrace][0];return TQ.format(rstr.roledlg.tips.passterrace,a.gateName)},this._onGetVipTip=function(){return this.role_.vip==0?rstr.roledlg.tips.novip:TQ.format(rstr.roledlg.tips.vip,this.role_.vip)}})