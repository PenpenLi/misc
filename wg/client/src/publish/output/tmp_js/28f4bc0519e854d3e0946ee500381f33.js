NullInBuildBlock=new function(){this.init=function(a,b,c){},this.clear=function(){},this.isInRect=function(a){return!1},this.setDisable=function(a){},this.setItem=function(a){},this.hot=function(){},this.normal=function(){},this.getItem=function(){return null},this.setTime=function(a){},this.show=function(){},this.hide=function(){},this.getDom=function(){return null}},InBuildBlock=function(){var a,b,c,d=null,e,f,g,h,i,j,k;this.init=function(e,f,g){a=e,b=this,c=f,k=!1,d=new CommBuildBlock(a,c,g),l(),n(),b.normal()},this.clear=function(){d.setItem(null)},this.isInRect=function(a){return d.isInRect(a)},this.setDisable=function(a){k=a},this.setItem=function(a){d.setItem(a),e=a;if(e){var c="";e.state==0?TQ.setCSS(j,"display","none"):e.state==1?c=IMG.makeImg("build/block/up.gif"):e.state==2&&(c=IMG.makeImg("build/block/del.gif")),TQ.setCSS(f,"display",c==""?"none":"block"),TQ.setCSS(g,"display","block"),IMG.setBKImage(f,c),TQ.setText(h,e.level),TQ.setText(i,e.itemres.name),IMG.setBKImage(f,c),m()}else n();b.normal()},this.hot=function(){e?r():k?q():o()},this.normal=function(){e?s():k?q():p()},this.getItem=function(){return d.getItem()},this.setTime=function(a){TQ.setCSS(j,"display","block"),TQ.setText(j,a)},this.show=function(){d.show()},this.hide=function(){d.hide()},this.getDom=function(){return d.getDom()};var l=function(){f=TQ.createDom("div"),TQ.append(c,f),TQ.setClass(f,"state"),g=TQ.createDom("div"),TQ.append(c,g),TQ.setClass(g,"levelname"),h=TQ.createDom("div"),TQ.append(g,h),TQ.setClass(h,"level"),i=TQ.createDom("div"),TQ.append(g,i),TQ.setClass(i,"name"),j=TQ.createDom("div"),TQ.append(c,j),TQ.setClass(j,"time")},m=function(){TQ.setDomPos(f,e.itemres.updpos.x,e.itemres.updpos.y),TQ.setDomPos(g,e.itemres.titlepos.x,e.itemres.titlepos.y),TQ.setDomPos(j,e.itemres.titlepos.x,e.itemres.titlepos.y+20)},n=function(){TQ.setCSS(f,"display","none"),TQ.setCSS(g,"display","none"),TQ.setCSS(j,"display","none")},o=function(){IMG.setBKImage(c,IMG.makeImg("build/block/blank_hot.gif"))},p=function(){IMG.setBKImage(c,IMG.makeImg("build/block/blank.gif"))},q=function(){IMG.setBKImage(c,IMG.makeImg("build/block/blank_dis.gif"))},r=function(){IMG.setBKImage(c,IMG.makeInBuildImg(e.itemres.img,!0,e.state))},s=function(){IMG.setBKImage(c,IMG.makeInBuildImg(e.itemres.img,!1,e.state))};this.init.apply(this,arguments)},CultureTrace=function(){var a,b,c,d;this.initialize=function(g,h){a=g,b=this,c=h,d=CommBuildUpdater.snew(a,{list:c.list,rlist:a.getImgr().getCultures().list,sendStopCmdToSvr:f,firststatefmt:rstr.inbuild.culturedlg.learnstate,statefmt:rstr.inbuild.state,opspeed:UIM.getDlg("culture").opSpeed,opcancel:UIM.getDlg("culture").opCancel,needitems:["stop","name","state","levelstate","lefttime","opbtn"]}),a.regUpdater(b,e,1e3)};var e=function(a){d.update()},f=function(b){var c="{cmd="+NETCMD.CULTURE+",subcmd=3,resid="+b.resid+"}";a.send(null,c)};this.initialize.apply(this,arguments)},RecruitTrace=function(){var a,b,c,d;this.initialize=function(g,h){a=g,b=this,c=h,d=CommBuildUpdater.snew(a,{list:c.list,rlist:a.getImgr().getSoldiers().recruiting,sendStopCmdToSvr:f,firststatefmt:rstr.inbuild.soldierdlg.recruitstate,statefmt:rstr.inbuild.state,opspeed:UIM.getDlg("soldier").opSpeed,opcancel:UIM.getDlg("soldier").opCancel,needitems:["stop","name","state","number","lefttime","opbtn"]}),a.regUpdater(b,e,1e3)};var e=function(a){d.update()},f=function(b){var c="{cmd="+NETCMD.SOLDIERRES+",subcmd=3,id="+b.id+"}";a.send(null,c)};this.initialize.apply(this,arguments)},CityLevelUtil=Class.extern(function(){this.getCityLevelByCanUseBlockIdx=function(a){var b=100;for(var c=0;c<res_maincity_inbuildnums.length;++c){var d=res_maincity_inbuildnums[c];if(a<d.cnt){b=d.clevel;break}}return b},this.getBlocksCntByCityLevel=function(a){var b=0;for(var c=res_maincity_inbuildnums.length-1;c>=0;--c){var d=res_maincity_inbuildnums[c];if(a>=d.clevel){b=d.cnt;break}}return b}}).snew()