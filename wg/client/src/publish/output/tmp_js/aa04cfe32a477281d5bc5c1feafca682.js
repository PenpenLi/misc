this.LUA||(LUA={}),function(){typeof LUA.getQuotes!="function"&&(LUA.getQuotes=function(a){var b=new Array,c=new RegExp("['\"]","g");while(c.test(a)){var d=a.charAt(c.lastIndex-1),e=a.indexOf(d,c.lastIndex);if(e<0)break;var f=!0;while(a.charAt(e-1)=="\\"){e=a.indexOf(d,e+1);if(e<0){f=!1;break}}if(!f)break;b.push(c.lastIndex-1,e),c.lastIndex=e+1}return b}),typeof LUA.inQuotes!="function"&&(LUA.inQuotes=function(a,b){var c=!1;for(var d=0;d<a.length/2;d+=1)if(b>=a[2*d]&&b<=a[2*d+1]){c=!0;break}return c}),typeof LUA.isArray!="function"&&(LUA.isArray=function(a,b,c,d){var e=!1;for(;;){var f=a.indexOf("=",c);if(f<0||f>=d)break;if(this.inQuotes(b,f)){c=f+1;continue}e=!0;break}return!e}),typeof LUA.getBrackets!="function"&&(LUA.getBrackets=function(a,b){var c=0,d=0,e=new Array,f=new Array,g=new RegExp("[{}]","g");while(g.test(a)){var h=g.lastIndex-1,i=a.charAt(h),j=this.inQuotes(b,h);e.push(0);if(!j)if(i=="{"){f.push(d,h);if(f.length>=4){var k=f[(f.length/2-2)*2+1],l=this.isArray(a,b,k,h);if(l){var m=f[(f.length/2-2)*2];e[m]=1}}}else{var k=f[(f.length/2-1)*2+1],l=this.isArray(a,b,k,h);if(l){var m=f[(f.length/2-1)*2];e[m]=1,e[d]=1}else{var m=f[(f.length/2-1)*2];e[m]==1&&(e[d]=1)}f.pop(),f.pop()}d+=1}return e}),typeof LUA.getEqualSigns!="function"&&(LUA.getEqualSigns=function(a,b){var c=0,d=new Array;for(;;){c=a.indexOf("=",c);if(c<0)break;var e=this.inQuotes(b,c);e?d.push(0):d.push(1),c+=1}return d}),typeof LUA.getCommaLasts!="function"&&(LUA.getCommaLasts=function(a,b){var c=new Array,d=new RegExp(",[ s	]*}","g");while(d.test(a)){var e=d.lastIndex-1,f=this.inQuotes(b,e);f?c.push(0):c.push(1)}return c}),typeof LUA.toJSON!="function"&&(LUA.toJSON=function(a){if(a.charAt(0)!="L")return a;a=a.substring(1);var b=this.getQuotes(),c=this.getBrackets(a,b),d=this.getEqualSigns(a,b),e=this.getCommaLasts(a,b),f=0,g=a.replace(/=/g,function(a){return d[f]==1?(f+=1,":"):(f+=1,"=")});f=0;var h=g.replace(/,\s*\}/g,function(a){return e[f]==1?(f+=1,"}"):(f+=1,a)});f=0;var i=h.replace(/[\{\}]/g,function(a){return c[f]==1?(f+=1,a=="{"?"[":"]"):(f+=1,a)});return i})}()