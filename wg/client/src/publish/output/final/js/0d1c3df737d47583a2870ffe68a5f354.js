C_BESETGEMCOLOR="#Ef9000",C_INTENSIFYCOLOR="#00F0FF",C_BASE_ATTRS_SET=null,C_TIP_NEWLINE="<br/>",C_TIP_SPACE="&nbsp;",C_TIP_TWO_SPACE=C_TIP_SPACE+C_TIP_SPACE,C_TIP_FOUR_SPACE=C_TIP_TWO_SPACE+C_TIP_TWO_SPACE,C_TIP_SPLITLINE='<hr class="ui-split"/>',C_TIP_REDCOLOR="#FF2000",C_TIP_GREENCOLOR="#20FF20",C_TIP_VALIDCOLOR=C_TIP_GREENCOLOR,C_TIP_INVALIDCOLOR=C_TIP_REDCOLOR,C_TIP_VSPACE='<div style="HEIGHT:8px;FONT-SIZE:8px;OVERFLOW:hidden;"></div>',ListToDisc=function(a){var b={};for(var c in a)b[a[c]]=!0;return b},AttrsCommHdr=function(a,b,c,d){if(!b)return l;var e=function(b,c){var d="";C_BASE_ATTRS_SET||(C_BASE_ATTRS_SET=TQ.listToSet([ATTR.CO,ATTR.HI,ATTR.HU,ATTR.DE,ATTR.SP,ATTR.ES,ATTR.MA]));if(C_BASE_ATTRS_SET[b]&&a.ilevel){var e=res_intensify[a.ilevel-1].addbattrper,f=parseInt(c.val*e/100,10);f>0&&(d='<font color="'+C_INTENSIFYCOLOR+'">(+'+f+")</font>")}return d},f=function(a,b,c,d,f){return a+=a!=""?"<br/>":"",a+=c.name+rstr.comm.colon+f,a+=e(b,d),a+=d.u==VAL_UNIT.PER?"%":"",a},g=[[ATTR.ST_B,ATTR.ST_A],[ATTR.AG_B,ATTR.AG_A],[ATTR.PH_B,ATTR.PH_A]],h=function(a){for(i in g)if(g[i][0]==a)return!0;return!1},j=function(a){for(i in g)if(g[i][1]==a)return!0;return!1},k=function(a,b){var c=0;for(i in g)g[i][0]==b&&(c=g[i][1]);for(var d in a){var e=a[d],f=e.id?e.id:d;if(f==c)return e.val}return 0},l="";for(var m in b){var n=b[m],o=n.id?n.id:parseInt(m,10);if(d[o])continue;var p=TQ.qfind(c,"id",o);if(!!p&&!j(o))if(h(o)){var q=k(b,o);l=f(l,o,p,n,n.val+q)}else o==ATTR.EL?l=f(l,o,p,n,rstr.herodlg.elements[n.val]):l=f(l,o,p,n,n.val)}return l!=""?l+"<br/>":""},CommAttrsTipGetter=Class.extern(function(){this.get=function(c,d,e,f){if(!c.attrs)return"";var g="";for(var h=0;h<e.length;++h){var i=e[h],j=c.attrs[i.base],k=c.attrs[i.append],l=j&&j.val>0,m=k&&k.val>0;if(!l&&!m)continue;var n=a(j);l&&m&&(n+="("),m&&(n+="+"),n+=a(k),l&&m&&(n+=")"),g+=b(d,h,i.base>0?i.base:i.append)+TQ.formatColorStr(n,f)+C_TIP_NEWLINE}return g};var a=function(a){return a?a.val==0?"":a.u==VAL_UNIT.VAL?a.val:a.u==VAL_UNIT.PER?a.val+"%":"":""},b=function(a,b,c){if(a!=null)return a[b];var d=TQ.qfind(res_attrs,"id",c);return!d||!d.name?c:d.name+rstr.comm.colon}}).snew(),NatureAttrsCommHdr=function(a,b,c){if(!b)return"";var d="",e=[ATTR.NST,ATTR.NAG,ATTR.NPH];for(var f=0;f<e.length;++f){var g=e[f],h=TQ.qfind(c,"id",g),i=b[g];d+=d!=""?"<br/>":"",d+=h.name+rstr.comm.colon+HeroNAttrColorGetter.getColorVal(a.prof,g,i.val)}return d},ExpendCommHdr=function(g,item,expend,hero){var val=0,actor=g.getActorMgr().getMainActor();try{var HLVL=actor&&actor.getAttr(ATTR.LVL)?actor.getAttr(ATTR.LVL).val:1;hero&&!actor&&(HLVL=hero.level);var SLVL=item.level;val=parseInt(eval(expend.val),10)}catch(e){val=expend.val}var isvalid=actor&&actor.getAttr(expend.attr).val>val;return hero&&(isvalid=hero.attrs(expend.attr).val>val),{val:val,valid:isvalid}},PerBarHdr=function(){var a="<br/>";this.init=function(){},this.getHeroHpInfo=function(a){return b(a.attrs,"hp",ATTR.HP,ATTR.MHP,c)},this.getHeroMpInfo=function(a){return b(a.attrs,"mp",ATTR.MP,ATTR.MMP,d)},this.getHeroMStrInfo=function(a){return b(a.attrs,"mstr",ATTR.CA,ATTR.MCA,e)},this.getActorHpInfo=function(a){return b(a.getAttrs(),"hp",ATTR.HP,ATTR.MHP,c)},this.getActorMpInfo=function(a){return b(a.getAttrs(),"mp",ATTR.MP,ATTR.MMP,d)},this.getActorMStrInfo=function(a){return b(a.getAttrs(),"mstr",ATTR.CA,ATTR.MCA,e)};var b=function(b,c,d,e,f){return b&&b[d]&&b[e]?rstr.fight.tooltip[c]+f(b[d].val,b[e].val)+a:""},c=function(a,b){return f("perbarred50.gif","perbarborder50.gif",50,a,b,!0)},d=function(a,b){return f("perbarblue50.gif","perbarborder50.gif",50,a,b,!0)},e=function(a,b){return f("perbargreen50.gif","perbarborder50.gif",50,a,b,!0)},f=function(a,b,c,d,e,f){var g=parseInt(c*d/e)-c,h=IMG.makeImg("comm/perbar/"+a),i=IMG.makeImg("comm/perbar/"+b),j='<img src="'+i+'"';return j+=' style="WIDTH:'+c+"px; HEIGHT:7px; BACKGROUND:url("+h+") "+g+'px 50%;"/>',f&&(j+=" "+d+"/"+e),j};this.init.apply(this,arguments)},PERBARHDR=new PerBarHdr,ActorTooltip=function(){var a="<br/>",b;this.init=function(a){b=a},this.getItemDesc=function(a){return c(a)};var c=function(a){var b="<div class=actortip>";b+=d(a),b+=e(a);var c={};c[ATTR.LVL]=a.getAttr(ATTR.LVL),b+=AttrsCommHdr(a,c,res_attrs,[]),b+=PERBARHDR.getActorHpInfo(a),b+=PERBARHDR.getActorMpInfo(a),b+=PERBARHDR.getActorMStrInfo(a);var f=[ATTR.LVL,ATTR.HP,ATTR.MHP,ATTR.MP,ATTR.MMP,ATTR.AR];return b+=AttrsCommHdr(a,a.getAttrs(),res_attrs,ListToDisc(f)),b+="</div>",b},d=function(a){var b="<center><b>"+a.getName()+"</b> ";return a.getFlag()<=FACTOR_FLAG.SELF_SOLDIER?b+=rstr.fight.tooltip.allis.self:a.getFlag()<=FACTOR_FLAG.FRIEND_SOLDIER?b+=rstr.fight.tooltip.allis.friend:b+=rstr.fight.tooltip.allis.enemy,b+"</center>"},e=function(b){var c=b.getItemres();return c&&c.desc&&c.desc!=""?c.desc+a:""};this.init.apply(this,arguments)},SkillTooltip=Class.extern(function(){var m_g;this.init=function(a){m_g=a},this.getItemDesc=function(a,b){ItemResUtil.initItemres(b,"id");var c='<div class="itemtip">';return c+=_getSkillName(a,b),c+=_getSkillFiveElem(a,b),c+=_getSkillDescInfo(a,b),c+=_getSkillDex(b),c+=_getNextSkillDesc(a,b),c+=_getOpTip(b),c+="</div>",c};var _getSkillName=function(a,b){var c=b.level,d=AddLevelByHeroFiveElemAttr.getAddLevel(m_g,a,b.itemres);d>0&&(c=c+"("+TQ.formatColorStr("+"+d,COLORS.APPEND_ATTR)+")");var e="<center><b>"+b.itemres.name+"</b> "+TQ.format(rstr.comm.flevel,c)+"</center>";return TQ.formatColorStr(e,COLORS.SKILL_TIP_NAME)},_getSkillFiveElem=function(a,b){var c=rstr.skillTip.fiveElems[b.itemres.fiveelem];return TQ.formatColorStr(c,COLORS.SKILL_TIP_FIVE_ELEM)+C_TIP_NEWLINE},_getSkillDescInfo=function(a,b){var c=_getDescByLevel(b.itemres,_getFinalSkillLevel(a,b));return TQ.formatColorStr(c,COLORS.SKILL_TIP_DESC)+C_TIP_NEWLINE},_getSkillDex=function(a){if(a.level==res_hero_baseskill_maxlevel)return"";var b=TQ.qfind(res_heroskills_upd,"level",a.level+1);if(b==null)return"";var c=rstr.herodlg.lbl.skilldex+" "+a.dex+"/"+b.needdex;return c+C_TIP_NEWLINE},_getNextSkillDesc=function(a,b){if(b.level==res_hero_baseskill_maxlevel)return"";var c=C_TIP_NEWLINE;return c+=rstr.herodlg.lbl.nextskill+C_TIP_NEWLINE,c+=_getDescByLevel(b.itemres,_getFinalSkillLevel(a,b)+1),c+=C_TIP_NEWLINE,c=TQ.formatColorStr(c,COLORS.SKILL_TIP_NEXTLEVEL),c},_getOpTip=function(a){return a.level==res_hero_baseskill_maxlevel?"":C_TIP_NEWLINE+rstr.herodlg.lbl.steelskilltip},_getDescByLevel=function(itemres,level){var replaces={};for(var i=0;i<itemres.effects.length;++i){var effect=itemres.effects[i];if(effect.id==0)continue;var LV=level;replaces["{"+(i+1)+"."+"pro}"]=Math.round(eval(effect.pro)*10)/10,replaces["{"+(i+1)+"."+"val}"]=Math.round(eval(effect.val)*10)/10}var s=itemres.desc;for(var k in replaces)s=s.replace(k,replaces[k]);return s},_getFinalSkillLevel=function(a,b){var c=AddLevelByHeroFiveElemAttr.getAddLevel(m_g,a,b.itemres);return b.level+c}}),TacticSkillTooltip=function(){var a;this.init=function(b){a=b},this.getItemDesc=function(a,c){return b(a,c)};var b=function(a,b){ItemResUtil.initItemres(a,"id");var g='<div class="itemtip">';return g+=c(a),g+=d(a),b=="original"?g+=e(a):b=="weared"&&(g+=f(a)),g+="</div>",g},c=function(a){return"<center><b>"+a.itemres.name+"</b> "+TQ.format(rstr.comm.flevel,a.level)+"</center>"},d=function(a){return a.itemres.desc+C_TIP_NEWLINE},e=function(a){return a.level==0?C_TIP_NEWLINE+rstr.herodlg.lbl.learntacticskilltip:C_TIP_NEWLINE+rstr.herodlg.lbl.weartacticskilltip},f=function(){return C_TIP_NEWLINE+rstr.herodlg.lbl.wearedtacticskilltip};this.init.apply(this,arguments)},SpecSkillTooltip=function(){var a;this.init=function(b){a=b},this.getItemDesc=function(a){return b(a)};var b=function(a,b){ItemResUtil.initItemres(a,"id");var f='<div class="itemtip">';return f+=c(a),f+=d(a),f+=e(a),f+="</div>",f},c=function(a){return"<center><b>"+a.itemres.name+"</b> "+TQ.format(rstr.comm.flevel,a.level)+"</center>"},d=function(a){return a.itemres.desc+C_TIP_NEWLINE},e=function(a){return a.level==1?"":C_TIP_NEWLINE+rstr.herodlg.lbl.learnspecskilltip};this.init.apply(this,arguments)},FarmPipTooltip=Class.extern(function(){var a;this.init=function(b){a=b},this.getItemDesc=function(a){return b(a)};var b=function(a){var b='<div class="farmpiptip">';return b+=c(a),b+=d(a),b+=e(a),b+=f(a),b+=g(a),b+=h(a),b+=i(a),b+=j(a),b+=k(a),b+=l(a),b+=m(a),b+="</div>",b},c=function(a){return"<center><b>"+a.itemres.name+"</b></center>"},d=function(a){return TQ.format(rstr.farm.selpip.tips.usepopu,res_farmblock_needpopu)+C_TIP_NEWLINE},e=function(a){var b=res_farmpip_needtime["LV"+a.itemres.level];return TQ.format(rstr.farm.selpip.tips.usetime,TQ.formatTime(2,b))+C_TIP_NEWLINE},f=function(a){return TQ.format(rstr.farm.selpip.tips.baseout,n(a))+C_TIP_NEWLINE},g=function(a){return TQ.format(rstr.farm.selpip.tips.skilladd,o(a))+C_TIP_NEWLINE},h=function(a){return TQ.format(rstr.farm.selpip.tips.buildadd,p(a))+C_TIP_NEWLINE},i=function(a){return TQ.format(rstr.farm.selpip.tips.roleadd,q(a))+C_TIP_NEWLINE},j=function(a){return TQ.format(rstr.farm.selpip.tips.alliadd,r(a))+C_TIP_NEWLINE},k=function(a){return TQ.format(rstr.farm.selpip.tips.buffadd,s(a))+C_TIP_NEWLINE},l=function(a){return TQ.format(rstr.farm.selpip.tips.vipadd,t(a))+C_TIP_NEWLINE},m=function(a){return TQ.format(rstr.farm.selpip.tips.totalout,u(a))+C_TIP_NEWLINE},n=function(a){var b=res_farmpip_needtime["LV"+a.itemres.level];return parseInt(b*res_farm_sec_output,10)},o=function(b){var c=0;return b.itemres.bresid==FIXID.FARM?c=FIXID.FOODCBUILD:b.itemres.bresid==FIXID.TIMBERYARD?c=FIXID.WOODCBUILD:b.itemres.bresid==FIXID.QUARRY?c=FIXID.STONECBUILD:b.itemres.bresid==FIXID.IRONORE&&(c=FIXID.IRONCBUILD),a.getImgr().getFarmCultureAddOutput(c,n(b))},p=function(b){return a.getImgr().getFarmBuildAddOutput(n(b))},q=function(b){return a.getImgr().getFarmRoleAddOutput(n(b))},r=function(b){return a.getImgr().getFarmAlliAddOutput(n(b))},s=function(b){return a.getImgr().getFarmBuffStateAddOutput(n(b))},t=function(b){return a.getImgr().getFarmVipAddOutput(n(b))},u=function(a){var b=n(a);return b+=o(a),b+=p(a),b+=q(a),b+=r(a),b+=s(a),b+=t(a),b}}),BuildTooltip=function(){var C_TIP_NEWLINE="<br/>",C_SPLITLINE='<hr class="ui-split"/>',C_EN_COLOR="#30ff30",C_NOEN_COLOR="#ff3000",m_g=0,m_cityId=0;this.init=function(a){m_g=a},this.getItemDesc=function(a,b,c){return m_cityId=a,_getItemTipDesc(b,c)},this.getSimpleUpgradeTip=function(a,b){return m_cityId=a,_getSimpleUpgradeTip(b)},this.isCanUpgrade=function(a,b){return m_cityId=a,_isCanUpgrade(b)},this.isFullLevel=function(a){return _isFullLevel(a)};var _formatHave=function(a,b){return a>b?TQ.formatColorStr(b,C_NOEN_COLOR):b},_isFullLevel=function(a){var b=ItemResUtil.findBuildLevelres(a.itemres.id,a.level+1);return!b},_isCanUpgrade=function(a){var b=_getCommRes(),c=ItemResUtil.findBuildLevelres(a.itemres.id,a.level+1);if(!c)return!1;var d=function(a){return a};if(!_traversalPreBuild(c,d))return!1;var e=function(a,b,c){return a.num<=c};if(!_traversalNeedItem(c,e))return!1;var f=function(a,c,d){return a.num<=b[c]};return _traversalNeedRes(c,f)?!0:!1},_getSimpleUpgradeTip=function(a){var b=_getCommRes(),c=ItemResUtil.findBuildLevelres(a.itemres.id,a.level+1);if(!c)return _getSimpleUpTipMaxLevel(a);var d=_getSimpleUpTipPreBuild(c);return d+=_getSimpleUpTipNeedItem(c),d+=_getSimpleUpTipNeedCommRes(b,c),d},_getSimpleUpTipMaxLevel=function(a){return TQ.format(rstr.inbuild.panel.tips.maxlevel,a.itemres.name,a.level)},_getSimpleUpTipPreBuild=function(a){var b="",c=function(a,c,d,e,f){if(a)return!0;var g="";if(c.id==FIXID.CITYLEVEL){var h=RStrUtil.getCityNameByLevel(e),i=RStrUtil.getCityNameByLevel(f);g=TQ.format(rstr.inbuild.panel.tips.nopreclevel,h,i)}else g=TQ.format(rstr.inbuild.panel.tips.noprebuild,d.name,e,f);var j=a?C_EN_COLOR:C_NOEN_COLOR;return b+=TQ.formatColorStr(g,j)+"<br/>",!0};return _traversalPreBuild(a,c),b},_getSimpleUpTipNeedItem=function(a){var b="",c=function(a,c,d){var e=a.num<=d;if(e)return!0;var f=e?C_EN_COLOR:C_NOEN_COLOR,g=TQ.format(rstr.inbuild.panel.tips.noneeditem,c.name,a.num,d);return b+=TQ.formatColorStr(g,f)+"<br/>",!0};return _traversalNeedItem(a,c),b},_getSimpleUpTipNeedCommRes=function(a,b){var c="",d=function(b,d,e){var f=b.num<=a[d];if(f)return!0;var g=f?C_EN_COLOR:C_NOEN_COLOR,h=TQ.format(rstr.inbuild.panel.tips.noneedres,e,b.num,a[d]);return c+=TQ.formatColorStr(h,g)+"<br/>",!0};return _traversalNeedRes(b,d),c},_getMaxLevelTip=function(a){var b="<div class=buildtipauto>";return b+=TQ.formatLine(TQ.format(rstr.inbuild.panel.tips.maxlevel,a.itemres.name,a.level)),b+="</div>",b},_getItemTipDesc=function(a,b){var c=_getCommRes(),d=_getTags(a,b.resid);return a=="up"||a=="firstup"?_getUpgradeBuildTip(b,c,d):a=="down"?_getDownBuildTip(b,c,d):a=="build"?_getCommBuildTip(b,c,d):a=="recruit"?_getRecruitTip(b,c,d):""},_getUpgradeBuildTip=function(a,b,c){var d=ItemResUtil.findBuildLevelres(a.itemres.id,a.level+1);if(!d)return _getMaxLevelTip(a);var e="<div class=buildtip>";return e+=_getTipBuildName(c.uptip,a,a.level+1),e+=C_TIP_NEWLINE,e+=_replaceBuildDesc(a.level+1,d,a.itemres.desc),e+=C_TIP_NEWLINE,e+=C_TIP_NEWLINE,e+=_getTipNeedTitle(c),e+=_getTipPreBuildNeed(d),e+=_getTipItemNeed(d),e+=_getTipCommResNeed(b,d),e+=_getTipNeedFoot(c),e+=_getTipTimeNeed(d.ntime),e+="</div>",e},_getDownBuildTip=function(a,b,c){var d=ItemResUtil.findBuildLevelres(a.itemres.id,a.level),e=ItemResUtil.findBuildLevelres(a.itemres.id,a.level-1);if(!d)return!1;var f="<div class=buildtip>";return f+=_getTipBuildName(c.downtip,a,a.level-1),f+=C_TIP_NEWLINE,e?f+=_replaceBuildDesc(a.level-1,e,a.itemres.desc):f+=rstr.comm.buildWillBeDestroy,f+=C_TIP_NEWLINE,f+=C_TIP_NEWLINE,f+=_getTipRetTitle(c),f+=_getTipCommResRet(b,d),f+=_getTipRetFoot(),f+=_getTipTimeNeed(d.ntime*res_down_retres_per),f+="</div>",f},_getCommBuildTip=function(a,b,c){var d=ItemResUtil.findBuildLevelres(a.itemres.id,a.level);if(!d)return"";var e="<div class=buildtipbuild>";return e+="<center><b>"+a.itemres.name+"</b> "+TQ.format(rstr.comm.flevel,a.level)+"</center>",e+=_replaceBuildDesc(a.level,d,a.itemres.desc),e+="</div>",e},_replaceBuildDesc=function(a,b,c){var c=_replaceBuildDescByEval(a,b,c);return _replaceBuildDescByTmpl(a,b,c)},_replaceBuildDescByEval=function(level,levelres,desc){var replaces={},evals=desc.match(/eval\([^)]+\)/g);for(var i=0;evals&&i<evals.length;++i){var oneEval=evals[i];oneEval=oneEval.replace(/eval\(([^)]+)\)/g,"$1"),oneEval=_replaceBuildDescByTmpl(level,levelres,oneEval),replaces[evals[i]]=eval(oneEval)}return _replaceBuildDescByPairs(desc,replaces)},_replaceBuildDescByTmpl=function(a,b,c){var d={},e=c.match(/\{[^\}]+\}/g);for(var f=0;e&&f<e.length;++f){var g=e[f];g=g.replace(/\{([^\}]+)\}/g,"$1"),g=="level"?d[e[f]]=a:d[e[f]]=b[g]}return _replaceBuildDescByPairs(c,d)},_replaceBuildDescByPairs=function(a,b){for(var c in b)while(a.indexOf(c)>=0)a=a.replace(c,b[c]);return a},_getRecruitTip=function(a,b,c){var d=ItemResUtil.findBuildLevelres(a.itemres.id,a.level+1);if(!d)return"";var e="<div class=buildtip>";return e+=TQ.format(rstr.inbuild.panel.tips.recruittip,a.itemres.name)+C_TIP_NEWLINE,e+=C_TIP_NEWLINE,e+=a.itemres.desc+C_TIP_NEWLINE,e+=C_TIP_NEWLINE,e+=_getTipNeedTitle(c),e+=_getTipPreBuildNeed(d),e+=_getTipItemNeed(d),e+=_getTipCommResNeed(b,d),e+=_getTipNeedFoot(c),e+=_getTipTimeNeed(d.ntime),e+="</div>",e},_getTipBuildName=function(a,b,c){return TQ.format(a,b.itemres.name,c)+C_TIP_NEWLINE},_getTipNeedTitle=function(a){var b="<table width=100%><tr><td width=33%>"+a.needtitle1+"</td><td width=33%>"+a.needtitle2+"</td><td width=34%>"+a.needtitle3+"</td></tr></table>";return b+=C_SPLITLINE,b+="<table width=100%>",b+="<tr><td width=33%></td><td width=33%></td><td width=34%></td></tr>",b},_getTipPreBuildNeed=function(a){var b="",c=function(a,c,d,e,f){var g="",h="",i="",j=a?C_EN_COLOR:C_NOEN_COLOR;return c.id==FIXID.CITYLEVEL?(g=TQ.formatColorStr(rstr.inbuild.panel.tips.needclevel,j),h=TQ.formatColorStr(RStrUtil.getCityNameByLevel(e),j),i=TQ.formatColorStr(RStrUtil.getCityNameByLevel(f),j)):(g=TQ.formatColorStr(rstr.inbuild.panel.tips.needcond,j),h=TQ.formatColorStr(d.name+"("+TQ.format(rstr.comm.flevel,e)+")",j),i=TQ.formatColorStr(f,j)),b+="<tr><td>"+g+"</td><td>"+h+"</td><td>"+i+"</td></tr>",!0};return _traversalPreBuild(a,c),b},_getTipItemNeed=function(a){var b="",c=function(a,c,d){var e=a.num<=d,f=e?C_EN_COLOR:C_NOEN_COLOR,g=TQ.formatColorStr(rstr.inbuild.panel.tips.needitem,f),h=TQ.formatColorStr(c.name+"("+a.num+")",f),i=TQ.formatColorStr(d,f);return b+="<tr><td>"+g+"</td><td>"+h+"</td><td>"+i+"</td></tr>",!0};return _traversalNeedItem(a,c),b},_getTipCommResNeed=function(a,b){var c="",d=function(b,d,e){var f=b.num<=a[d],g=f?C_EN_COLOR:C_NOEN_COLOR,h=TQ.formatColorStr(rstr.inbuild.panel.tips.need+e,g),i=TQ.formatColorStr(b.num,g),j=TQ.formatColorStr(a[d],g);return c+="<tr><td>"+h+"</td><td>"+i+"</td><td>"+j+"</td></tr>",!0};return _traversalNeedRes(b,d),c},_getTipNeedFoot=function(){return"</table>"+C_SPLITLINE},_getTipRetTitle=function(a){return _getTipNeedTitle(a)},_getTipCommResRet=function(a,b){var c="",d=function(b,d,e){return c+="<tr><td>"+rstr.inbuild.panel.tips.ret+e+"</td><td>"+parseInt(b.num*res_down_retres_per)+"</td><td>"+a[d]+"</td></tr>",!0};return _traversalNeedRes(b,d),c},_getTipRetFoot=function(){return _getTipNeedFoot()},_getTipTimeNeed=function(a){var b=rstr.inbuild.panel.tips.needtime+" "+TQ.formatTime(0,a),c=m_g.getImgr().getFactBuildTime(a),d=rstr.inbuild.panel.tips.facttime+" "+TQ.formatTime(0,c);return b+C_TIP_NEWLINE+d},_traversalPreBuild=function(a,b){if(!a.conds)return!0;for(var c=0;c<a.conds.length;++c){var d=a.conds[c];if(!d.id||!d.level)continue;var e=ItemResUtil.findItemres(d.id),f=0,g=0;d.id==FIXID.CITYLEVEL?(f=m_g.getImgr().getCityRes().buildval.level,g=d.level):(CityBuildUtil.isCanBuildInCity(m_cityId,d.id)?f=m_g.getImgr().getBuildLevelByResId(m_cityId,d.id):f=m_g.getImgr().getBuildLevelByResId(BUILDCITY_ID.ALL,d.id),g=d.level);var h=f>=g;if(!b(h,d,e,g,f))return!1}return!0},_traversalNeedItem=function(a,b){if(!a.items)return!0;for(var c=0;c<a.items.length;++c){var d=a.items[c];if(!d.id||!d.num)continue;var e=ItemResUtil.findItemres(d.id),f=m_g.getImgr().getItemNumByResId(d.id);if(!b(d,e,f))return!1}return!0},_traversalNeedRes=function(a,b){var c=[FIXID.FOOD,FIXID.WOOD,FIXID.STONE,FIXID.IRON,FIXID.POPU];for(var d=0;d<c.length;++d){var e=c[d],f=ItemResUtil.findItemres(e),g=f.ename,h=a[g];if(!h)continue;e==FIXID.POPU&&(h=a.addpopu);var i={num:h};if(!b(i,g,f.name))return!1}return!0},_getCommRes=function(){var a=m_g.getImgr(),b=a.getCityRes(),c={};return TQ.dictCopy(c,b.cres),c.money=a.getMoney(),c.popu=a.getIdlePopu(),c.buildval={cltres:0},c},_getTags=function(a,b){var c={};return _isInBuildResid(b)||_isAlliBuildResid(b)||_isCityDefResid(b)?_setTagsCommBuild(a,c):_isTeBuildResid(b)?_setTagsTeBuild(a,c):_isSkillResid(b)?_setTagsSkill(a,c):_isSoldierResid(b)?_setTagsSoldier(a,c):alert("error: u3f942314, [can not find class] resid="+b),c},_setTagsCommBuild=function(a,b){if(a=="firstup"||a=="up")b.needtitle1=rstr.inbuild.panel.tips.needtitles[0],b.needtitle2=rstr.inbuild.panel.tips.needtitles[1],b.needtitle3=rstr.inbuild.panel.tips.needtitles[2];a=="down"?(b.downtip=rstr.inbuild.panel.tips.downtip,b.needtitle1=rstr.inbuild.panel.tips.rttitles[0],b.needtitle2=rstr.inbuild.panel.tips.rttitles[1],b.needtitle3=rstr.inbuild.panel.tips.rttitles[2]):a=="firstup"?(b.uptip=rstr.inbuild.panel.tips.fuptip,b.nextdesclbl=rstr.inbuild.panel.tips.firstdesc):a=="up"&&(b.uptip=rstr.inbuild.panel.tips.uptip,b.nextdesclbl=rstr.inbuild.panel.tips.nextdesc)},_setTagsTeBuild=function(a,b){b.needtitle1=rstr.inbuild.panel.tips.learntitles[0],b.needtitle2=rstr.inbuild.panel.tips.learntitles[1],b.needtitle3=rstr.inbuild.panel.tips.learntitles[2],a=="firstup"?(b.uptip=rstr.inbuild.panel.tips.flearnuptip,b.nextdesclbl=rstr.inbuild.panel.tips.firstdesc):(b.uptip=rstr.inbuild.panel.tips.learnuptip,b.nextdesclbl=rstr.inbuild.panel.tips.nextdesc)},_setTagsSkill=function(a,b){b.needtitle2=rstr.alli.skill.learntitles[1],b.needtitle3=rstr.alli.skill.learntitles[2],a=="firstup"?(b.needtitle1=rstr.alli.skill.learntitles[0],b.uptip=rstr.alli.skill.flearnuptip,b.nextdesclbl=rstr.inbuild.panel.tips.firstdesc):(b.needtitle1=rstr.alli.skill.learntitles[3],b.uptip=rstr.alli.skill.learnuptip,b.nextdesclbl=rstr.inbuild.panel.tips.nextdesc)},_setTagsSoldier=function(a,b){b.needtitle1=rstr.inbuild.panel.tips.recruittitles[0],b.needtitle2=rstr.inbuild.panel.tips.recruittitles[1],b.needtitle3=rstr.inbuild.panel.tips.recruittitles[2]},_isInBuildResid=function(a){return a>=FIXID.FIRSTINBUILD&&a<=FIXID.LASTINBUILD},_isAlliBuildResid=function(a){return a>=FIXID.FIRSTALLIBUILD&&a<=FIXID.LASTALLIBUILD},_isTeBuildResid=function(a){return a>=FIXID.FIRSTCBUILD&&a<=FIXID.LASTCBUILD},_isSoldierResid=function(a){return a>=FIXID.FIRSTSOLDIER&&a<=FIXID.LASTSOLDIER},_isCityDefResid=function(a){return a>=FIXID.FIRSTCDBUILD&&a<=FIXID.LASTCDBUILD},_isSkillResid=function(a){return a>=FIXID.FIRSTSKILL&&a<=FIXID.LASTSKILL};this.init.apply(this,arguments)},CultureTooltip=Class.extern(function(){var m_g=null,m_this=null;this.init=function(a){m_this=this,m_g=a},this.isValid=function(a){var b=ItemResUtil.findCultureLevelres(a.id,a.level+1);if(!b)return!1;for(var c=0;c<b.conds.length;++c){var d=b.conds[c];if(!d.id)continue;if(!_isValidCondition(d))return!1}var e=_getResTags();for(var c=0;c<e.length;++c){var f=e[c];if(!b[f])continue;if(!_isValidResNumber(b[f],f))return!1}return!0},this.getCultureDesc=function(a){var b=ItemResUtil.findItemres(a.id),c='<div class="culturetip">';return c+="<center><B>"+b.name+"</B> ("+TQ.format(rstr.comm.flevel,a.level)+")</center>",c+=_getBaseDesc(a),c+="</div>",c},this.getLearnDesc=function(a){var b=_getBaseDesc(a),c=ItemResUtil.findCultureLevelres(a.id,a.level+1);return c&&(b+=rstr.culturedlg.tip.learnprecond+_getLearnPreCond(c)+C_TIP_NEWLINE,b+=rstr.culturedlg.tip.learnneed+_getLearnNeed(c)+C_TIP_NEWLINE,b+=C_TIP_SPLITLINE,b+=rstr.culturedlg.tip.rawneedtime+_getRawNeedTime(c),b+="&nbsp;&nbsp;&nbsp;&nbsp;",b+=rstr.culturedlg.tip.needtime+_getFaceNeedTime(c)+C_TIP_NEWLINE),b};var _getBaseDesc=function(a){var b=ItemResUtil.findCultureLevelres(a.id,a.level),c=ItemResUtil.findCultureLevelres(a.id,a.level+1),d=ItemResUtil.findItemres(a.id),e="";return b&&(e+=rstr.culturedlg.tip.curleveleff+_getDescByLevel(d,a.level)+C_TIP_NEWLINE),c?e+=rstr.culturedlg.tip.nextleveleff+_getDescByLevel(d,a.level+1)+C_TIP_NEWLINE:e+=rstr.culturedlg.tip.ismaxlevel+C_TIP_NEWLINE,e+=rstr.culturedlg.tip.maxlevel+d.maxlevel+C_TIP_NEWLINE,e},_getResTags=function(){return["money","food","wood","stone","iron"]},_getDescByLevel=function(itemres,level){var reps={};for(var i=0;i<itemres.effects.length;++i){var effect=itemres.effects[i];if(!effect.id)continue;if(!effect.val)continue;if(effect.val=="")continue;var LV=level;reps["{"+(i+1)+"."+"pro}"]=eval(effect.pro),reps["{"+(i+1)+"."+"val}"]=eval(effect.val)}var s=itemres.desc;for(var k in reps)s=s.replace(k,reps[k]);return s},_getLearnPreCond=function(a){var b="";for(var c=0;c<a.conds.length;++c){var d=a.conds[c];if(!d.id)continue;var e=ItemResUtil.findItemres(d.id),f=e.name+TQ.format(rstr.comm.flevel,d.level),g=_isValidCondition(d)?C_TIP_VALIDCOLOR:C_TIP_INVALIDCOLOR;b+=TQ.formatColorStr(f,g),b+=C_TIP_TWO_SPACE}return b},_getLearnNeed=function(a){var b="",c=_getResTags();for(var d=0,e=0;d<c.length;++d){var f=c[d];if(!a[f])continue;e%3==0&&e>0&&(b+=C_TIP_NEWLINE+rstr.culturedlg.tip.learnneedempty),e++;var g=rstr.comm[f]+a[f],h=_isValidResNumber(a[f],f)?C_TIP_VALIDCOLOR:C_TIP_INVALIDCOLOR;b+=TQ.formatColorStr(g,h),b+=C_TIP_TWO_SPACE}return b},_getRawNeedTime=function(a){return TQ.formatTime(0,a.ntime)},_getFaceNeedTime=function(a){if(m_g.getImgr().hasVipEffect(VIP_EFF.SPEED_CULTURELEARN))return TQ.format(rstr.culturedlg.tip.vipimm,m_g.getImgr().getVipLevel());var b=m_g.getImgr().getFactLearnCultureTime(a.ntime);return TQ.formatTime(0,b)},_isValidCondition=function(a){return a.level<=_getMyHasLevel(a.id)},_getMyHasLevel=function(a){var b=ItemClassRange.getFirstClassId(a);return b==RES_CLS.IBUILD?m_g.getImgr().getBuildLevelByResId(BUILDCITY_ID.ALL,a):b==RES_CLS.CULTURE?m_g.getImgr().getCultureLevel(a):0},_isValidResNumber=function(a,b){return a<=_getMyHasNumber(b)},_getMyHasNumber=function(a){return a=="money"?m_g.getImgr().getMoney():m_g.getImgr().getCityRes().cres[a]}}),PlayerTooltip=function(){var a="<br>",b,c;this.initialize=function(a){b=a},this.getItemDesc=function(a){return d(a)};var d=function(b){var c='<div class="itemtip">';c+="<center><B>"+b.name+"</B>",b.uid&&(c+="("+b.uid+")"),c+="</center>",b.level&&(c+=rstr.comm.level+rstr.comm.colon+b.level+a),b.sex!=undefined&&(c+=rstr.comm.sex+rstr.comm.colon+rstr.comm.sexs[b.sex]+a),b.allipos&&(c+=rstr.alli.main.lbl.pos+rstr.comm.colon+rstr.alli.alliposs[b.allipos]+a),b.ranking&&(c+=rstr.alli.main.lbl.ranking+rstr.comm.colon+b.ranking+a),b.prestige&&(c+=rstr.alli.main.lbl.prestige+rstr.comm.colon+b.prestige+a);if(b.cityid){var d=ItemResUtil.findItemres(b.cityid);c+=rstr.comm.city+rstr.comm.colon+d.name}return c+="</div>",c};this.initialize.apply(this,arguments)},PopuTooltip=Class.extern(function(){var a;this.init=function(b){a=b},this.getItemDesc=function(){return b()};var b=function(){var b=a.getImgr(),c="<div class=itemtip>";return c+="<center><b>"+rstr.popupanel.popu+"</b></center>",c+=rstr.popupanel.tips.lfreepopu+b.getIdlePopu()+C_TIP_NEWLINE,c+=rstr.popupanel.tips.lworkpopu+b.getWorkPopu()+C_TIP_NEWLINE,c+=C_TIP_SPLITLINE,c+=rstr.popupanel.tips.lcurpopu+(b.getIdlePopu()+b.getWorkPopu())+C_TIP_NEWLINE,c+=rstr.popupanel.tips.lmaxpopu+b.getMaxPopu()+C_TIP_NEWLINE,b.getIdlePopu()<0&&(c+=rstr.popupanel.tips.fewidlepopu),c+="</div>",c}}),MoneyTooltip=Class.extern(function(){var a;this.init=function(b){a=b},this.getItemDesc=function(){return b()};var b=function(){var b=a.getImgr(),c="<div class=itemtip>";c+="<center><b>"+rstr.popupanel.money+"</b></center>",c+=rstr.respanel.comres.curnum+b.getMoney()+C_TIP_NEWLINE,c+=rstr.respanel.comres.maxnum+b.getMaxMoney()+C_TIP_NEWLINE,c+=rstr.respanel.comres.factout+b.getMoneyOutput()+C_TIP_NEWLINE;if(b.getMoney()>=b.getMaxMoney()){var d=rstr.briefrespanel.comres.ismaxres;b.getMoney()>b.getMaxMoney()&&(d=TQ.formatColorStr(d,C_TIP_REDCOLOR)),c+=d+C_TIP_NEWLINE}return c+="</div>",c}}),HeroTooltip=function(){var a="<br>",b='<div style="HEIGHT:12px;FONT-SIZE:8px;OVERFLOW:hidden;"></div>',c="#a0a0a0",d;this.init=function(a){d=a},this.getItemDesc=function(a){return h(a)},this.getNewHeroDesc=function(a){return i(a)},this.getNewHeroNatureFactorDesc=function(a){return j(a)};var e=function(a){return"<center><b>"+(a.name?a.name:a.itemres.name)+"</b></center>"},f=function(b){return b.owner?"<font color="+c+">"+TQ.format(rstr.herodlg.tips.owner,b.owner.name,b.owner.uid)+"</font>"+a:""},g=function(b){if(!b.cityid)return"";var d=ItemResUtil.findItemres(b.cityid);return"<font color="+c+">"+TQ.format(rstr.herodlg.tips.mappos,d.name,b.pos.x,b.pos.y)+"</font>"+a},h=function(a){if(!a||!a.itemres)return"";var c="<div class=itemtip>";c+=e(a),c+=PERBARHDR.getHeroHpInfo(a),c+=PERBARHDR.getHeroMpInfo(a),c+=PERBARHDR.getHeroMStrInfo(a);var d=[ATTR.LVL,ATTR.HP,ATTR.MHP,ATTR.MP,ATTR.MMP,ATTR.AR,ATTR.CA,ATTR.MCA,ATTR.AN,ATTR.MAN,ATTR.PS,ATTR.MPS,ATTR.XP,ATTR.NXP];c+=AttrsCommHdr(a,a.attrs,res_attrs,ListToDisc(d));var h=f(a);return h+=g(a),c+=h?b+h:"",c+="</div>",c},i=function(b){if(!b)return"";var c="<div class=itemtip>";c+=e(b),c+=rstr.comm.level+rstr.comm.colon+b.level+a;var d=[{base:ATTR.ST_B,append:ATTR.ST_A},{base:ATTR.AG_B,append:ATTR.AG_A},{base:ATTR.PH_B,append:ATTR.PH_A}];return c+=CommAttrsTipGetter.get(b,null,d,COLORS.HERO_TIP_BASEATTR),c+=NatureAttrsCommHdr(b,b.attrs,res_attrs),c+="</div>",c},j=function(a){if(!a)return"";var b="<div class=itemtip>";return b+=NatureAttrsCommHdr(a,a.attrs,res_attrs),b+="</div>",b};this.init.apply(this,arguments)},CommResTooltip=function(){var a="<br/>",b="#FFFF00",c="#FF3300",d="#FFFFFF",e;this.init=function(a){e=a},this.getItemDesc=function(a,b){return f(a,b)};var f=function(b,c){var d=e.getImgr().getCityRes().cres,f=ItemResUtil.findItemres(c),g="<div class=itemtip>";g+="<B>"+f.name+"</B>"+a,g+=a,g+=rstr.briefrespanel.comres.curnum+d[b]+a,g+=rstr.briefrespanel.comres.maxnum+d.max+a;var h={};h[FIXID.FOOD]=FIXID.FARM,h[FIXID.WOOD]=FIXID.TIMBERYARD,h[FIXID.STONE]=FIXID.QUARRY,h[FIXID.IRON]=FIXID.IRONORE,g+=rstr.briefrespanel.comres.curcanget+UIM.getPanel("farm").getCanGetMyRes(h[c])+a,g+=rstr.briefrespanel.comres.gettip+a;if(d[b]>=d.max){var i=rstr.briefrespanel.comres.ismaxres;d[b]>d.max&&(i=TQ.formatColorStr(i,C_TIP_REDCOLOR)),g+=i+a}return g+="</div>",g};this.init.apply(this,arguments)},ItemTooltip=Class.extern(function(){var a='<div style="HEIGHT:8px;FONT-SIZE:6px;OVERFLOW:hidden;"></div>',b="#eeeea0",c="#20ff20",d="#ff3300",e=null,f="self";this.init=function(a){e=a},this.getItemDesc=function(a,b,c){f=b?b:"self";if(!a||!a.itemres)return"";var d="itemtip";TQ.isIE6()&&c?d="wearitemtip_ie6":c&&(d="wearitemtip");var e="<div class="+d+">";return e+=g(a),e+=h(a),e+=j(a),e+=k(a),e+=l(a),e+=m(a),e+=n(a),e+=o(a),e+=p(a),e+=q(a),e+=r(a),e+=s(a),e+=t(a),e+="</div>",e},this.getItemExpends=function(a){return""},this.getItemDescText=function(a){return""},this.getItemAttrDesc=function(a){return""};var g=function(a){var b=IMG.makeBigImg(a.itemres.bigpic),c=a.itemres.level?a.itemres.level:1,d="item_icon_border_level"+c;return'<div class="itemtipicon '+d+'" style="BACKGROUND:url(\''+b+"') -1px -1px;\"></div>"},h=function(b){var c=b.flevel?"+"+b.flevel:"",d="<center><b>"+ItemNameColorGetter.getColorVal(b.itemres.level,b.itemres.name+c);return IS_DEBUG&&(d+="("+b.itemres.id+")"),d+="</b></center>",d+a},i=function(a){if(!a.flevel)return"";var b="";for(var c=0;c<a.flevel;++c)b+="★";var d="";for(var c=a.flevel;c<10;++c)d+="☆";return TQ.formatColorStr(rstr.itemTip.forceLevel,COLORS.ITEM_TIP_FORCELEVELLBL)+TQ.formatColorStr(b,COLORS.FORCELEVELSTAR)+TQ.formatColorStr(d,COLORS.EMPTY_FORCELEVELSTAR)+C_TIP_NEWLINE},j=function(a){if(a.itemres.desc){var b=a.itemres.desc;return a.appendDesc&&(b+=a.appendDesc),TQ.formatColorStr(b,COLORS.ITEM_TIP_DESC)+C_TIP_NEWLINE+C_TIP_VSPACE}return""},k=function(a){return f=="sys"?"":a.isBind||a.itemres.isbind?TQ.formatColorStr(rstr.itemTip.binded,COLORS.ITEM_TIP_BIND)+C_TIP_NEWLINE:TQ.formatColorStr(rstr.itemTip.unbind,COLORS.ITEM_TIP_BIND)+C_TIP_NEWLINE},l=function(a){return a.itemres.needlevel?ItemNameColorGetter.getColorVal(a.itemres.level,rstr.itemTip.needLevel+a.itemres.needlevel)+C_TIP_NEWLINE:""},m=function(a){var b=[{base:ATTR.ST_B,append:ATTR.ST_A},{base:ATTR.AG_B,append:ATTR.AG_A},{base:ATTR.PH_B,append:ATTR.PH_A},{base:ATTR.CO,append:0}];return CommAttrsTipGetter.get(a,rstr.itemTip.baseAttrs,b,COLORS.ITEM_TIP_BASEATTR)},n=function(a){var b=[{base:ATTR.SP,append:0}];return CommAttrsTipGetter.get(a,rstr.itemTip.speedAttrs,b,COLORS.ITEM_TIP_SPEEDATTR)},o=function(a){var b=[{base:ATTR.HU,append:0},{base:ATTR.DE,append:0},{base:ATTR.HI,append:0},{base:ATTR.ES,append:0},{base:ATTR.MPS,append:0}];return CommAttrsTipGetter.get(a,rstr.itemTip.secAttrs,b,COLORS.ITEM_TIP_SECATTR)},p=function(a){var b=[{base:0,append:ATTR.JIN_SKILL_LEVEL},{base:0,append:ATTR.MU_SKILL_LEVEL},{base:0,append:ATTR.SHUI_SKILL_LEVEL},{base:0,append:ATTR.HUO_SKILL_LEVEL},{base:0,append:ATTR.TU_SKILL_LEVEL}];return CommAttrsTipGetter.get(a,rstr.itemTip.skillLevelAttrs,b,COLORS.ITEM_TIP_SKILLLEVELATTR)},q=function(a){if(!a.itemres.apos)return"";if(a.itemres.apos<HEROARM_POS.FIRST||a.itemres.apos>HEROARM_POS.LAST||a.itemres.apos==HEROARM_POS.HORSE)return"";var b=0;a.gems&&(b=a.gems.length);var c=TQ.format(rstr.itemTip.besetGems,b);return TQ.formatColorStr(c,COLORS.ITEM_TIP_BESETGEMLBL)+C_TIP_NEWLINE},r=function(a){if(!a.gems||a.gems.length==0)return"";var b={};b[RES_EFF.H_ADD_PHY]=0,b[RES_EFF.H_ADD_STR]=1,b[RES_EFF.H_ADD_AGILE]=2,b[RES_EFF.H_ADD_CO]=3;var c="";for(var d=0;d<a.gems.length;++d){var e=a.gems[d],f=ItemResUtil.findItemres(e),g=f.effects[0];c+=TQ.formatColorStr(f.name,COLORS.ITEM_TIP_BESETGEMNAME),c+=rstr.itemTip.besetGemEffects[b[g.id]],c+=TQ.formatColorStr("+"+g.val,COLORS.APPEND_ATTR),c+=C_TIP_NEWLINE}return c},s=function(a){if(f=="sys")return"";if(f=="other")return"";if(!a.itemres.salePrice)return"";var b=TQ.format(rstr.itemTip.salePrice,a.itemres.salePrice);return TQ.formatColorStr(b,COLORS.ITEM_TIP_SALELPRICE)+C_TIP_NEWLINE},t=function(a){if(!a.buylimit||a.buylimit.itemnumsec!=2)return"";var b=TQ.format(rstr.itemTip.buylimit,a.buylimit.itemnum);return TQ.formatColorStr(b,COLORS.ITEM_TIP_BUYLIMIT)+C_TIP_NEWLINE}}),BuildVarBarTooltip=function(){var a="<br/>",b="#FFFF00",c;this.init=function(a){c=a},this.getItemDesc=function(){var d=c.getImgr().getCityRes().buildval,e="<div class=itemtip>";return e+="<B>"+rstr.briefrespanel.buildval.name+"</B>"+a,e+=a,e+=rstr.briefrespanel.buildval.curnum+(d.cur-d.hurt)+a,e+=rstr.briefrespanel.buildval.hurtnum+d.hurt+a,d.level<res_max_city_level?e+=rstr.briefrespanel.buildval.nextnum+d.max+a:e+=TQ.formatColorStr(rstr.briefrespanel.buildval.fulllevel,b)+a,e+="</div>",e},this.init.apply(this,arguments)},TooltipMgr=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;this.initialize=function(){},this.init=function(p){a=p,b=ItemTooltip.snew(a),c=new CommResTooltip(a),d=new HeroTooltip(a),e=PopuTooltip.snew(a),f=new BuildTooltip(a),g=FarmPipTooltip.snew(a),h=SkillTooltip.snew(a),k=new ActorTooltip(a),l=new PlayerTooltip(a),m=new BuildVarBarTooltip(a),n=MoneyTooltip.snew(a),i=new TacticSkillTooltip(a),j=new SpecSkillTooltip(a),o=CultureTooltip.snew(a)},this.getItemAttrDesc=function(a){return b.getItemAttrDesc(a)},this.getItemDescText=function(a,c){return b.getItemDescText(a,c)},this.getItemDesc=function(a,c,d){return b.getItemDesc(a,c,d)},this.getCommResDesc=function(a,b){return c.getItemDesc(a,b)},this.getHeroDesc=function(a){return d.getItemDesc(a)},this.getNewHeroDesc=function(a){return d.getNewHeroDesc(a)},this.getNewHeroNatureFactorDesc=function(a){return d.getNewHeroNatureFactorDesc(a)},this.getPopuDesc=function(){return e.getItemDesc()},this.getFriendDesc=function(a){return l.getItemDesc(a)},this.getPlayerDesc=function(a){return l.getItemDesc(a)},this.getBuildDesc=function(a,b,c){return f.getItemDesc(a,b,c)},this.getSimpleBuildUpTip=function(a,b){return f.getSimpleUpgradeTip(a,b)},this.isCanBuildUpgrade=function(a,b){return f.isCanUpgrade(a,b)},this.isFullBuildLevel=function(a){return f.isFullLevel(a)},this.getFarmPipDesc=function(a){return g.getItemDesc(a)},this.getSkillDesc=function(a,b){return h.getItemDesc(a,b)},this.getTacticSkillDesc=function(a,b){return i.getItemDesc(a,b)},this.getSpecSkillDesc=function(a){return j.getItemDesc(a)},this.getActorDesc=function(a){return k.getItemDesc(a)},this.getItemExpends=function(a,c){return b.getItemExpends(a,c)},this.getBuildVarBarDesc=function(){return m.getItemDesc()},this.getMoneyDesc=function(){return n.getItemDesc()},this.getCultureLearnDesc=function(a){return o.getLearnDesc(a)},this.getCultureDesc=function(a){return o.getCultureDesc(a)},this.isCultureCanLearn=function(a){return o.isValid(a)},this.makeItemTip=function(a){return'<div class="itemtip">'+a+"</div>"},this.makeItemTip2=function(a){return'<div class="itemtip2">'+a+"</div>"},this.initialize.apply(this,arguments)},TIPM=new TooltipMgr