HelpDlg=BaseDlg.extern(function(){this._getDlgCfg=function(){return{modal:!1,pos:{x:"center",y:30},title:rstr.help.helpdlg.title,uicfg:uicfg.help.helpdlg}},this._afterCreate=function(){this._fillHelpTree()},this._setCallers=function(){this.items_.helptree.setCaller({self:this,caller:this._onClickTreeItem})},this._initInfo=function(){this.items_.helptree.scrollPos(0),this.selectNewComerHelp()},this._fillHelpTree=function(){this.items_.helptree.removeAll();var a=this.items_.helptree.getRoot();this._buildCatalog(a,res_helps.catalog)},this._buildCatalog=function(a,b){if(!b)return;for(var c=0,d=b.length;c<d;++c){var e=b[c],f=this.items_.helptree.append(a,{text:e.name,state:1,userdata:e.res});this._buildCatalog(f,e.catalog)}},this.selectNewComerHelp=function(){var a=this.items_.helptree.getRoot(),b=this.items_.helptree.getItemFirstChild(a);this.items_.helptree.setCurSel(this.items_.helptree.getItemFirstChild(b))},this._onClickTreeItem=function(a,b){if(!b.userdata)return;if(!b.userdata.desc)return;var c=" ";if(b.userdata.helpimg){var d=TQ.format(rstr.newcomerHelp.imgLink,b.userdata.helpimg);c+=HyperLinkMgr.formatLink(d)}TQ.setHtml(this.items_.helpcon.getContainerObj(),b.userdata.desc+c),this.items_.helpcon.refresh()}}),MiniHelpDlg=function(){var a,b,c,d={},e;this.init=function(c){a=c,b=this,a.regEvent(EVT.SHOWHELPBYID,0,b,h)},this.openDlg=function(a,b){f(),c.show(b),e=parseInt(a,10),isNaN(e)?i(a):j()},this.closeDlg=function(){c&&c.hide()};var f=function(){c||(c=Dialog.snew(a,{modal:!1,pos:{x:0,y:0},uiback:uiback.dlg.minihelp,zIndex:UI_ZORDER_POPPANEL}),a.getGUI().initDlg(c,uicfg.help.minihelpdlg,d),d.closeBtn.setCaller({self:b,caller:g}),c.hide())},g=function(a){c.hide()},h=function(a){b.openDlg(a.helpid)},i=function(a){TQ.setHtml(d.helpcon.getContainerObj(),a),d.helpcon.refresh()},j=function(){var a=ItemResUtil.findHelpRes(e);a&&(TQ.setHtml(d.title,a.name),TQ.setHtml(d.helpcon.getContainerObj(),a.desc),d.helpcon.refresh())};this.init.apply(this,arguments)}