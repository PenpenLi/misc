TIP_FLAG={COMM:0,CUSTOM:1,TIMER:2},Tip=function(){var a=15,b=28,c=5,d=null,e=null,f=null,g=null,h=[],i=null,j=null,k=null,l=!1,m=TIP_FLAG.COMM,n={x:0,y:0};this.init=function(a,b,c,j,k){d=a,e=this,l=!1,f=b,g=c,j&&TQ.trim(j)!=""&&h.push(j),i=k,o()},this.destroy=function(){H()},this.setFlag=function(a){m=a},this.getFlag=function(){return m},this.setCaller=function(a){j=a},this.setData=function(a){k=a},this.reset=function(){l=!1},this.resetTipContent=function(){l=!1,z()},this.show=function(a){u(),y(a)},this.hide=function(){C()},this.getTip=function(){this.resetTipContent()},this.getTipMsg=function(){return h.length==0?"":h[0]},this.getLastPos=function(){return n};var o=function(){m!=TIP_FLAG.CUSTOM&&(isPcBrowser()&&(TQ.addEvent(g,"mouseover",p),TQ.addEvent(g,"mouseout",r),TQ.addEvent(g,"mousemove",q)),isMobileBrowser()&&TQ.captureTouchEvent(g,{self:e,touchStart:s,touchEnd:t,touchCancel:t}))},p=function(a){if(m==TIP_FLAG.CUSTOM)return;x(a)},q=function(a){if(m==TIP_FLAG.CUSTOM)return;x(a)},r=function(a){if(m==TIP_FLAG.CUSTOM)return;a=a?a:window.event,C(),TQ.stopPropagation(a)},s=function(a,b,c){if(m==TIP_FLAG.CUSTOM)return;var d=TQ.makeMouseEvent(b.pageX,b.pageY,BTN_LEFT,c);window.setTimeout(function(){x(d)},300)},t=function(a,b,c){if(m==TIP_FLAG.CUSTOM)return;var d=TQ.makeMouseEvent(b.pageX,b.pageY,BTN_LEFT,c);C(),TQ.stopPropagation(d)},u=function(){m==TIP_FLAG.TIMER&&d.regUpdater(e,w,1e3)},v=function(){m==TIP_FLAG.TIMER&&d.unregUpdater(e,w)},w=function(){e.reset(),y(n)},x=function(a){a=a?a:window.event,u(),y(TQ.mouseCoords(a)),TQ.stopPropagation(a)},y=function(a){z(),A()||D(a)},z=function(){if(l)return;B();if(A())return;for(var a=0;a<h.length;++a)f.setTipContent(a,h[a],e);l=!0},A=function(){return h.length==0},B=function(){if(!j)return;var a=j.caller.call(j.self,k);h=[];if(typeof a=="string"){var b=a.split("<split>");for(var c in b){if(!b[c])continue;if(TQ.trim(b[c])=="")continue;h.push(b[c])}}else a&&h.push(a)},C=function(){v(),l=!1,A()||(f.hideTip(0),f.hideTip(1))},D=function(c){n.x=c.x,n.y=c.y;var d={cx:a,cy:b},e=TQ.getAdjustPosByWinSize({x:c.x-G(),y:c.y},E(),d),g=F(e);for(var h=0;h<g.length;++h)f.showTip(h,g[h])},E=function(){var a={cx:0,cy:0};for(var b=0;b<h.length;++b){var d=f.getSize(b);a.cx>0&&(a.cx+=c),a.cx+=d.cx,a.cy<d.cy&&(a.cy=d.cy)}return a},F=function(a){var b=a.x,d=[];for(var e=0;e<h.length;++e){var g=f.getSize(e);d.push({x:b,y:a.y}),b+=g.cx+c}return d},G=function(){var a=0;for(var b=0;b<h.length-1;++b)a+=f.getSize(b).cx;return a},H=function(){m!=TIP_FLAG.CUSTOM&&(TQ.removeEvent(g,"mouseover",p),TQ.removeEvent(g,"mouseout",r),TQ.removeEvent(g,"mousemove",q))};this.init.apply(this,arguments)},EmptyTooltipPanel=Class.extern(function(){this.init=function(a){},this.setContent=function(a){},this.show=function(a){},this.hide=function(){},this.getSize=function(){return{cx:0,cy:0}}}).snew(null),TooltipPanel=Class.extern(function(){var a=20,b=10,c=null,d=null,e=null;this.init=function(a){c=a,i()},this.setContent=function(a){f(),g(a),h()},this.show=function(c){e.show({x:c.x-a/2,y:c.y-b/2}),d.show(c)},this.hide=function(){e.hide(),d.hide()},this.getSize=function(){var a=e.getDom();return{cx:TQ.getDomWidth(a),cy:TQ.getDomHeight(a)}};var f=function(){var a=d.getDom();while(a.lastChild)a.removeChild(a.lastChild)},g=function(a){var b=d.getDom();typeof a=="string"?TQ.setHtml(b,a):TQ.append(b,a)},h=function(){var f=d.getWidth()+a,g=d.getHeight()+b,h=e.getDom();c.getGUI().setUIBack(h,f,g,uiback.tooltip.tip.type)},i=function(){d=new PopPanel(c,{zindex:UI_ZORDER_TOOLTIP+1}),e=new PopPanel(c,{zindex:UI_ZORDER_TOOLTIP}),d.hide(),e.hide();var a=d.getDom();TQ.setClass(a,"ui-tooltip");var b=e.getDom();TQ.setClass(b,"ui-tipback"),j(b,uiback.tooltip.tip.cls)},j=function(a,b){for(var c in b){var d=TQ.createDom("div");TQ.setClass(d,b[c]),TQ.append(a,d),TQ.fixIE6Png(d)}}}),Tooltip=Class.extern(function(){var a,b,c=!1,d={},e=[],f=1,g=[],h=null;this.init=function(){b=this,h={start:!1,tipobj:null}},this.create=function(b){a=b,i()},this.startAsyn=function(){h.start=!0},this.asynPresent=function(){h.start&&h.tipobj&&h.tipobj.resetTipContent()},this.setTipContent=function(a,b,c){h.tipobj=c;var d=l(a);d.setContent(b)},this.showTip=function(a,b){var c=l(a);c.show(b)},this.hideTip=function(a){var b=l(a);b.hide(),h.start=!1,h.tipobj=null},this.addTip=function(a,b,c){return j(a,b,c)},this.delTip=function(a){k(a)},this.getTipById=function(a){return d[a]},this.getSize=function(a){var b=l(a);return b.getSize()},this.setCallerData=function(a,b,c){m(a,b,c)};var i=function(){c||(c=!0,e.push(TooltipPanel.snew(a)),e.push(TooltipPanel.snew(a)))},j=function(c,e,f){var g=new Tip(a,b,c,e,f),h=n();return d[h]=g,h},k=function(a){var b=d[a];b?(b.destroy(),o(a)):log("error _deltip id:"+a)},l=function(a){return a>=0&&a<e.length?e[a]:EmptyTooltipPanel},m=function(a,c,d){var e=b.getTipById(a);e.setCaller(c),e.setData(d)},n=function(){return g.length>0?g.pop():(f=f<2147483647?f+1:1,f)},o=function(a){g.push(a)}}),TTIP=Tooltip.snew()