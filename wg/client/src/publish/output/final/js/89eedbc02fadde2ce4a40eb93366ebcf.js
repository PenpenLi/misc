HyperLinkHdr=Class.extern(function(){this.init=function(a){this.g=a},this.getAHeadFixParams=function(a){return'event,"'+a[0]+'"'},this.makeCommLink=function(a,b,c,d,e,f){isNull(d)&&(d="["),isNull(e)&&(e="]");var g="<a class='"+a+"'";return f&&(g+=" id='"+f+"' name='"+f+"'"),g+=" href='#' onclick='javascript:HyperLinkMgr.onClickLink("+b+"); return false;' ondragstart='return false;' onselectstart='return false;'>"+d+c+e+"</a>",g},this.makeCommLinkEx=function(a,b,c,d,e){return isNull(d)&&(d="["),isNull(e)&&(e="]"),"<a class='"+a+"' href='#' onclick='javascript:HyperLinkMgr.onClickLink("+b+"); return false;' onMouseOver='javascript:HyperLinkMgr.onMouseOver("+b+"); return false;' onMouseOut='javascript:HyperLinkMgr.onMouseOut("+b+"); return false;' onMouseMove='javascript:HyperLinkMgr.onMouseMove("+b+"); return false;' ondragstart='return false;' onselectstart='return false;'>"+d+c+e+"</a>"}}),HelpLinkHdr=HyperLinkHdr.extern(function(){this.makeLink=function(a){if(a.length!=3)return null;var b=a[1],c=a[2],d=this.getAHeadFixParams(a)+',"'+b+'"';return this.makeCommLink("ui-inner-help",d,c)},this.handleLink=function(a,b){var c=b[2],d=UIM.getDlg("minihelp");d.openDlg(c)}}),ImgHelpLinkHdr=HyperLinkHdr.extern(function(){this.makeLink=function(a){if(a.length!=3)return null;var b=a[1],c=a[2],d=this.getAHeadFixParams(a)+","+b;return this.makeCommLink("ui-link-imghelp",d,c)},this.handleLink=function(a,b){var c=b[2],d=UIM.getDlg("imghelp");d.openDlg(c)}}),RoleLinkHdr=HyperLinkHdr.extern(function(){this.makeLink=function(a){if(a.length!=3)return null;var b=a[1],c=a[2],d=this.getAHeadFixParams(a)+","+b+',"'+c+'"';return this.makeCommLink("ui-chat-link-player",d,c)},this.handleLink=function(a,b){var c=b[2],d=b[3],e=this.g.getImgr().getRoleRes();d!=e.name&&HDRM.getHdr("clickrole").click(TQ.mouseCoords(a),c,d)}}),HeroLinkHdr=HyperLinkHdr.extern(function(){this.makeLink=function(a){if(a.length!=3)return null;var b=a[1],c=a[2],d=this.getAHeadFixParams(a)+","+b+',"'+c+'"';return this.makeCommLink("ui-chat-link-hero",d,c)},this.handleLink=function(a,b){}}),ShowItemLinkHdr=HyperLinkHdr.extern(function(){this.makeLink=function(a){if(a.length!=4)return null;var b=a[1],c=a[2],d=a[3],e=RStrUtil.getItemColorNameByResId(b),f=this.getAHeadFixParams(a)+","+b+","+c+","+d;return this.makeCommLink("ui-chat-link-item",f,e,"","")},this.handleLink=function(a,b){var c=b[2],d=b[3],e=b[4],f=ItemResUtil.findItemres(c),g=HDRM.getHdr("clickitem");g.click(TQ.mouseCoords(a),e,{id:d,resid:c,itemres:f})}}),BuyItemLinkHdr=HyperLinkHdr.extern(function(){this.makeLink=function(a){if(a.length!=3)return null;var b=a[1],c=a[2],d=this.getAHeadFixParams(a)+","+b;return this.makeCommLink("ui-link-buyitem",d,c)},this.handleLink=function(a,b){var c=b[2],d=UIM.getDlg("buyitem");d.openDlg({id:0,resid:c,number:1e4}),this.g.getGUI().hideMsgBox()}}),FightDemoLinkHdr=HyperLinkHdr.extern(function(){var a=this.init;this.init=function(b){a(b),this._id=0},this.makeLink=function(a){if(a.length!=3)return null;var b=a[1],c=a[2],d=this.getAHeadFixParams(a)+","+b+","+c,e="fight_demo_a_"+this._id++;return this.makeCommLink("ui-link-fightdemo",d,rstr.fight.showfightdemo,"[","]",e)},this.handleLink=function(a,b){var c=b[2],d=b[3];UIM.openDlg("fightmap",c,d),HelpGuider.hideSpiritTip()}}),RechargeLinkHdr=HyperLinkHdr.extern(function(){this.makeLink=function(a){if(a.length!=2)return null;var b=a[1];return this.makeCommLink("ui-link-buyitem",this.getAHeadFixParams(a),b)},this.handleLink=function(a,b){JMISC.openPayWnd(),this.g.getGUI().hideMsgBox()}}),GotoMapLinkHdr=HyperLinkHdr.extern(function(){this.makeLink=function(a){if(a.length!=3)return null;var b=this.getAHeadFixParams(a)+","+a[1]+","+a[2],c=a[1]+","+a[2];return this.makeCommLink("ui-link-gotomap",b,c,"(",")")},this.handleLink=function(a,b){UIM.closeMapPanels(),UIM.getPanel("field").open(),UIM.getPanel("field").gotoPos({x:b[2],y:b[3]})}}),AllianceLinkHdr=HyperLinkHdr.extern(function(){this.makeLink=function(a){if(a.length!=2)return null;var b=this.getAHeadFixParams(a)+","+'"'+a[1]+'"',c=a[1];return this.makeCommLink("ui-link-alliance",b,c)},this.handleLink=function(a,b){AllianceSender.sendGetAllianceDetail(this.g,b[2])}}),YellowLinkHdr=HyperLinkHdr.extern(function(){this.init=function(a){this.g=a;var b=TTIP.addTip(TQ.getUiBody(),rstr.yellowdiamondDlg.tip.seeyd);this.tip_=TTIP.getTipById(b),this.tip_.setFlag(TIP_FLAG.CUSTOM)},this.handleLink=function(a,b){UIM.openDlg("yellowdiamond")},this.onMouseOver=function(a){var b=TQ.mouseCoords(a);this.tip_.show(b)},this.onMouseMove=function(a){var b=TQ.mouseCoords(a);this.tip_.show(b)},this.onMouseOut=function(a){this.tip_.hide()}}),BlueLinkHdr=HyperLinkHdr.extern(function(){this.init=function(a,b){this.g=a;var c=0;b=="self"?c=TTIP.addTip(TQ.getUiBody(),rstr.bluediamondDlg.tip.seebd2):c=TTIP.addTip(TQ.getUiBody(),rstr.bluediamondDlg.tip.seebd),this.tip_=TTIP.getTipById(c),this.tip_.setFlag(TIP_FLAG.CUSTOM)},this.handleLink=function(a,b){UIM.openDlg("bluediamond")},this.onMouseOver=function(a){var b=TQ.mouseCoords(a);this.tip_.show(b)},this.onMouseMove=function(a){var b=TQ.mouseCoords(a);this.tip_.show(b)},this.onMouseOut=function(a){this.tip_.hide()}}),Blue3366LinkHdr=HyperLinkHdr.extern(function(){this.init=function(a,b){this.g=a;var c=TTIP.addTip(TQ.getUiBody(),"");this.tip_=TTIP.getTipById(c),this.tip_.setFlag(TIP_FLAG.CUSTOM),this.tip_.setCaller({self:this,caller:this.onGetTip}),this.level_=0},this.handleLink=function(a,b){UIM.openDlg("blue3366diamond")},this.onMouseOver=function(a,b){this.level_=b[2];var c=TQ.mouseCoords(a);this.tip_.show(c)},this.onMouseMove=function(a){var b=TQ.mouseCoords(a);this.tip_.show(b)},this.onMouseOut=function(a){this.tip_.hide()},this.onGetTip=function(){return TQ.format(rstr.bluediamondDlg.tip.see3366,this.level_)}}),VipLinkHdr=HyperLinkHdr.extern(function(){this.makeLink=function(a){if(a.length!=2)return null;var b=a[1];return this.makeCommLink("ui-link-openvip",this.getAHeadFixParams(a),b)},this.handleLink=function(a,b){UIM.openDlg("vip"),this.g.getGUI().hideMsgBox()}}),ALinkHdr=HyperLinkHdr.extern(function(){this.makeLink=function(a){if(a.length!=3)return null;var b=a[1],c=this.getAHeadFixParams(a)+',"'+a[1]+'","'+a[2]+'"';return this.makeCommLink("ui-link-alink",c,b)},this.handleLink=function(a,b){window.open("http://"+b[3])}}),TipLinkHdr=HyperLinkHdr.extern(function(){this.init=function(a){this.g=a;var b=TTIP.addTip(TQ.getUiBody(),"");this.tip_=TTIP.getTipById(b),this.tip_.setFlag(TIP_FLAG.CUSTOM),this.tip_.setCaller({self:this,caller:this._onGetBlockTooltip}),this.tipmsg_="xxx"},this.makeLink=function(a){if(a.length!=3)return null;var b=a[1],c=a[2],d=this.getAHeadFixParams(a)+',"'+c+'"';return this.makeCommLinkEx("ui-link-openvip",d,b,"","")},this.handleLink=function(a,b){var c=TQ.mouseCoords(a);this.tip_.show(c)},this.onMouseOver=function(a,b){this.tipmsg_='<div class="itemtip2">'+b[2]+"</div>";var c=TQ.mouseCoords(a);this.tip_.show(c)},this.onMouseMove=function(a){var b=TQ.mouseCoords(a);this.tip_.show(b)},this.onMouseOut=function(a){this.tipmsg_="",this.tip_.hide()},this._onGetBlockTooltip=function(){return this.tipmsg_}}),HyperLinkMgr=Class.extern(function(){var a="?",b="r",c="h",d="i",e="b",f="f",g="c",h="m",i="a",j="H",k="Y",l="B",m="OB",n="3366",o="V",p="A",q="TIP",r,s,t={};this.init=function(){s=this},this.initOneTime=function(s){r=s,t[a]=HelpLinkHdr.snew(r),t[b]=RoleLinkHdr.snew(r),t[c]=HeroLinkHdr.snew(r),t[d]=ShowItemLinkHdr.snew(r),t[e]=BuyItemLinkHdr.snew(r),t[f]=FightDemoLinkHdr.snew(r),t[g]=RechargeLinkHdr.snew(r),t[h]=GotoMapLinkHdr.snew(r),t[i]=AllianceLinkHdr.snew(r),t[j]=ImgHelpLinkHdr.snew(r),t[k]=YellowLinkHdr.snew(r),t[l]=BlueLinkHdr.snew(r,"self"),t[m]=BlueLinkHdr.snew(r,"other"),t[n]=Blue3366LinkHdr.snew(r),t[o]=VipLinkHdr.snew(r),t[p]=ALinkHdr.snew(r),t[q]=TipLinkHdr.snew(r)},this.getHdr=function(a){return t[a]},this.onClickLink=function(){var a=arguments[0]?arguments[0]:window.event,b=arguments[1],c=t[b];return c?(c.handleLink(a,arguments),!1):!1},this.onMouseOver=function(){var a=arguments[0]?arguments[0]:window.event,b=arguments[1],c=t[b];return c?(c.onMouseOver(a,arguments),!1):!1},this.onMouseMove=function(){var a=arguments[0]?arguments[0]:window.event,b=arguments[1],c=t[b];return c?(c.onMouseMove(a,arguments),!1):!1},this.onMouseOut=function(){var a=arguments[0]?arguments[0]:window.event,b=arguments[1],c=t[b];return c?(c.onMouseOut(a,arguments),!1):!1},this.formatLink=function(a){return u(a)},this.formatChatName=function(a,b){var c="#[r:"+a+":"+b+"]";return u(c)};var u=function(a){var b=a.replace(/#\[[^\]]*\]/g,function(a){var b=a.substr(2,a.length-3),c=b.split(":");if(c.length>=2){var d=c[0],e=t[d];if(!e)return a;var f=e.makeLink(c);if(f)return f}return a});return b}}).snew()