OnlineTaskPanel=Class.extern(function(){this.g_=null,this.items_=null,this.state_=-1,this.init=function(a,b){this.g_=a,this.items_=b,this.g_.regUpdater(this,this._onUpdate,1e3),this.g_.regEvent(EVT.NET,NETCMD.TASK,this,this._onSvrTask),this.g_.regEvent(EVT.LOGIN_OK,0,this,this._onLoginOk),this.items_.onlineTask_get.setCaller({self:this,caller:this._onClickGet}),this._update()},this._update=function(){var a=this.g_.getImgr().getOnlineTask(),b=a.id>0;TQ.setCSS(this.items_.onlineTask_panel,"display",b?"block":"none");if(!b)return;var c=a.stopTime-this.g_.getSvrTimeS();c>0?(TQ.setTextEx(this.items_.onlineTask_leftTime,TQ.format(rstr.task.onlineTask.leftTime,TQ.formatTime(0,c))),IMG.setBKImage(this.items_.onlineTask_icon,IMG.makeImg("actbar/onlinetask/commicon.png")),this.items_.onlineTask_get.enable(!1)):(TQ.setTextEx(this.items_.onlineTask_leftTime,rstr.task.onlineTask.canGet),IMG.setBKImage(this.items_.onlineTask_icon,IMG.makeImg("actbar/onlinetask/openicon.png")),this.items_.onlineTask_get.enable(!0))},this._onUpdate=function(){this._update()},this._onClickGet=function(){TaskSender.sendGetOnlineTaskReward(this.g_)},this._onSvrTask=function(a){a.data.onlinetask&&(TQ.dictCopy(this.g_.getImgr().getOnlineTask(),a.data.onlinetask),this._update())},this._onLoginOk=function(){TaskSender.sendGetOnlineTaskInfo(this.g_)}})