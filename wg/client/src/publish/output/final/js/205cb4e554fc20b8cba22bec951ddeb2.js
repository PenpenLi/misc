SwfSoundPlayer=Class.extern(function(){this.init=function(a){this._swf=a,this._src=""},this.load=function(a){this._src=IMG.getSound(a)},this.play=function(){this._swf.playSound(this._src)},this.pause=function(){this._swf.stopSound()}}),SoundMgr=Class.extern(function(){var a=null,b=null,c={},d=[],e=null,f={idx:0,elapse:0},g=1e3,h=null,i=!0,j=null,k=null,l=!0,m=!0;this.init=function(){a=this,TQ.isMobile()&&(m=!1)},this.initOneTime=function(a){b=a},this.playSound=function(b){if(!m)return;a._loadSound(b,!1).play()},this.playBackSound=function(a){if(!m)return;this.stopBackSound();if(a.sounds.length==0)return;d=a.sounds,l=a.isRand,f.idx=4294967295,e=window.setInterval(this._updateBackSound,g)},this.toggleBackSound=function(){if(!m)return;i=!b.getImgr().isCanPlayBackSound(),b.getImgr().setCanPlayBackSound(i),this._playCurBackSound(),ClientCfgSender.sendSoundFlag(b)},this.playCurBackSound=function(){if(!m)return;UIM.getPanel("main").getItems().smbtn_toggle_bgsound.setPress(!b.getImgr().isCanPlayBackSound()),this._playCurBackSound()},this._playCurBackSound=function(){i=b.getImgr().isCanPlayBackSound(),i&&h?a._loadSound(h,!0).play():h&&a._loadSound(h,!0).pause()},this.isCanPlayBackSound=function(){return b?b.getImgr().isCanPlayBackSound():i},this.stopBackSound=function(){e&&(window.clearInterval(e),e=null),h&&a._loadSound(h,!0).pause()},this._loadSound=function(b,d){if(TQ.isIE6()||TQ.isIE7()||TQ.isIE8())return a._loadIESound(b,d);if(!c[b]){var e=document.createElement("audio");e.setAttribute("src",IMG.getSound(b));var f=document.getElementById("g_body");f.appendChild(e),e.play||(e.play=function(){}),e.pause||(e.pause=function(){}),c[b]=e}return c[b]},this._loadIESound=function(a,b){if(!b){if(!j){var c=swfobject.getObjectById("swf_play_sound_");j=SwfSoundPlayer.snew(c)}return j.load(a),j}if(!k){var c=swfobject.getObjectById("swf_play_backsound_");k=SwfSoundPlayer.snew(c)}return k.load(a),k},this._updateBackSound=function(){if(f.idx>=d.length){a._initBackSound(d),f.idx=0,f.elapse=0,h=d[f.idx].src,i&&a._loadSound(d[f.idx].src,!0).play();return}f.elapse+=g;var b=d[f.idx];if(f.elapse>=b.duration){f.elapse=0,f.idx++;if(f.idx>=d.length)return;h=d[f.idx].src,i&&a._loadSound(d[f.idx].src,!0).play()}},this._initBackSound=function(a){var b=[],c=[];TQ.dictCopy(c,a);if(!l)return c;while(c.length>0){var e=Math.floor(Math.random()*1e6)%c.length,f=c[e];c.splice(e,1),b.push(f)}d=b}}).snew()