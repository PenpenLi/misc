FriendApplyListDlg=Class.extern(function(){var a=null,b=null,c=null,d={};this.init=function(c){a=c,b=this,g()},this.openDlg=function(){e(),h(),i()};var e=function(){if(c)return;f()},f=function(){c=Dialog.snew(a,{modal:!1,title:rstr.friend.applylistdlg.title,pos:{x:"center",y:30}}),a.getGUI().initDlg(c,uicfg.friend.applylistdlg,d)},g=function(){a.regEvent(EVT.NET,NETCMD.FRIEND,b,m)},h=function(){c.show()},i=function(){j()},j=function(){if(!p())return;k(),l()},k=function(){var b=a.getImgr().getFriends().applys;d.list.setItemCount(b.length);for(var c=0;c<d.list.getCount();++c){var e=d.list.getItem(c),f=b[c];TQ.setTextEx(e.exsubs.name,f.roleName),TQ.setTextEx(e.exsubs.level,f.level),TQ.setTextEx(e.exsubs.sex,rstr.comm.sexs[f.sex]);var g=FieldUtil.getPosByGridId(f.gridId);TQ.setTextEx(e.exsubs.cood,g.x+","+g.y)}},l=function(){for(var a=0;a<d.list.getCount();++a){var c=d.list.getItem(a);c.exsubs.agreeBtn.setId(a),c.exsubs.rejectBtn.setId(a),c.exsubs.agreeBtn.setCaller({self:b,caller:n}),c.exsubs.rejectBtn.setCaller({self:b,caller:o})}},m=function(b){var c=b.data;if(c.applys){var d=a.getImgr().getFriends().applys;TQ.dictCopy(d,c.applys),j()}},n=function(b){var c=a.getImgr().getFriends().applys[b];FriendSender.sendAgreeApplyFriend(a,c.roleId)},o=function(b){var c=a.getImgr().getFriends().applys[b];FriendSender.sendRejectApplyFriend(a,c.roleId)},p=function(){return c?c.isShow():!1}})