FightResultMaker=Class.extern(function(){var a=null,b=null;this.init=function(c){a=c,b=this},this.getResultTitle=function(a){return e(a)?m(a):f(a)?o(a):g(a)?p(a):h(a)?q(a):i(a)?r(a):j(a)?s(a):"error result defender!"},this.getHonorString=function(a){return n(a)},this.hasDefExpend=function(a){var b=a.xianjing+a.gunmu+a.juma+a.leishi+a.nujian;return b>0},this.getDefExpend=function(a){var b={xianjing:0,gunmu:0,juma:0,leishi:0,nujian:0};return TQ.dictCopy(b,a),TQ.format(rstr.military.fightresult.lbl.lostCityDefRes,b.xianjing,b.gunmu,b.juma,b.leishi,b.nujian)},this.getGetOrLostResTitle=function(a){var b="",c="";return a.result==FIGHT_RESULT.ATTACKSUCC?(b=rstr.military.fightresult.lbl.attackGetRes,c=rstr.military.fightresult.lbl.targetLostRes):(b=rstr.military.fightresult.lbl.attackLostRes,c=rstr.military.fightresult.lbl.targetGetRes),{attack:b,target:c}},this.getGetOrLostResString=function(a){var b="";return c(a.gainres)?(b=rstr.military.fightresult.lbl.getRes,b+=d("+",a.gainres)):c(a.lossres)&&(b=rstr.military.fightresult.lbl.lostRes,b+=d("-",a.lossres)),b},this.getDropItemsString=function(a){var b="";for(var c in a.getdrop){var d=a.getdrop[c];if(d.type!="item")continue;var e=ItemResUtil.findItemres(d.id);if(!e)continue;b!=""&&(b+=", "),b+=e.name+rstr.dropdesc.numPrefix+d.number}return b!=""&&(b=rstr.military.fightresult.lbl.getItems+b),b},this.isMySucc=function(b){var c=a.getImgr().getRoleRes();return b.attacker.role.name==c.name?b.result==FIGHT_RESULT.ATTACKSUCC:b.result==FIGHT_RESULT.ATTACKFAIL};var c=function(a){if(!a)return!1;for(var b in a)if(a[b]>0)return!0;return!1},d=function(a,b){var c="",d=["food","wood","stone","iron","money","popu"];for(var e in d){var f=d[e];if(!b[f])continue;c!=""&&(c+=", ");var g="comm_inlineline_block";if(TQ.isIE6()||TQ.isIE7()||TQ.isIE8())g="comm_inlineline_block_fixie";c+="<div class="+g+">"+rstr.comm[f]+" "+a+b[f]+"</div>"}return c},e=function(a){return a.defender.role.objType==OBJ_TYPE.ROLE&&a.defender.role.name==a.defenderParty},f=function(a){return a.defender.role.objType==OBJ_TYPE.ROLE&&a.defender.role.name!=a.defenderParty},g=function(a){return a.defender.role.objType==OBJ_TYPE.TOWER},h=function(a){return a.defender.role.objType==OBJ_TYPE.COPYFIELD},i=function(a){return a.defender.role.objType==OBJ_TYPE.OWNERFIELD},j=function(a){return a.defender.role.objType==OBJ_TYPE.FIELD},k=function(a){return b.isMySucc(a)?rstr.military.fightresult.actions.mySucc:rstr.military.fightresult.actions.myFail},l=function(a){return b.isMySucc(a)?rstr.military.fightresult.actions.myGetHonor:rstr.military.fightresult.actions.enemyGetHonor},m=function(a){var b=TQ.format(rstr.military.fightresult.actions.resultAttackPartyRole,a.attacker.role.name,t(a),a.defender.role.name,k(a));return b+=n(a),b},n=function(a){return e(a)?!a.attacker.gainres||!a.attacker.gainres.honor?"":TQ.format(l(a),a.attacker.gainres.honor):""},o=function(a){return TQ.format(rstr.military.fightresult.actions.resultAttackAlliance,a.attacker.role.name,t(a),a.defenderParty,a.defender.role.name,k(a))},p=function(a){return TQ.format(rstr.military.fightresult.actions.resultAttackTower,a.attacker.role.name,t(a),a.defenderParty,a.defender.role.name,k(a))},q=function(a){return TQ.format(rstr.military.fightresult.actions.resultAttackCopyField,a.attacker.role.name,t(a),a.defender.role.name,k(a))},r=function(a){return TQ.format(rstr.military.fightresult.actions.resultAttackOwnerField,a.attacker.role.name,t(a),a.defender.role.name,k(a))},s=function(a){return TQ.format(rstr.military.fightresult.actions.resultAttackField,a.attacker.role.name,t(a),a.defender.role.name,k(a))},t=function(a){return a.expedType&&rstr.military.militarydlg.intents[a.expedType]?rstr.military.militarydlg.intents[a.expedType]:rstr.military.fightresult.actions.resultExpedAttack}})