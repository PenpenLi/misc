NullSocket=function(){this.connect=function(){},this.send=function(){},this.close=function(){},this.setKey=function(){},this.setMaxPackLen=function(){}},Msg=function(){var a=null,b=null,c=null,d=null,e=null,f=new NullSocket;this.init=function(e,f,h){a=this,b=e,c=f,d=h,g()},this.setGameObj=function(a){e=a},this.connect=function(){f!=null?f.connect(b,c):window.setTimeout(a.connect,200)},this.send=function(a){try{f.send(a,1),log(">>[c->s]"+a)}catch(b){}},this.close=function(){f.close()},this.setKey=function(a){f.setKey(a)},this.setMaxPackLen=function(a){f.setMaxPackLen(a)},this.onConnect=function(a){if(e!=null){if(d.type=="TGW"&&a){var b="tgw_l7_forward\r\nHost:"+d.url+"\r\n\r\n";f.send(b,0)}e.onConnect(a)}},this.onClose=function(){e!=null&&e.onClose()},this.onData=function(a){e!=null&&(a!=null&&log("<<[c<-s]"+a),e.onData(a))};var g=function(){f=h("socket");if(!f||typeof f.connect!="function")f=new NullSocket,window.setTimeout(g,100)},h=function(a){return document.getElementById(a)};this.init.apply(this,arguments)}