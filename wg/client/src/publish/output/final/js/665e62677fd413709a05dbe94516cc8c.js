SelectIconDlg=Class.extern(function(){var a=null,b=null,c=null,d=[],e=0,f=null,g={};this.init=function(c){a=c,b=this},this.setCaller=function(a){c=a},this.openDlg=function(a,b){h(a,b),i(),k(),o()};var h=function(a,b){d=a,e=b},i=function(){if(f)return;j(),m()},j=function(){f=Dialog.snew(a,{modal:!1,title:rstr.selectRoleIconDlg.title,pos:{x:"center",y:50}}),a.getGUI().initDlg(f,uicfg.selectRoleIconDlg,g)},k=function(){l()},l=function(){g.list.setItemCount(d.length),TQ.find(d,null,e)&&g.list.setCurSel(TQ.getLastFindIdx());for(var a=0;a<d.length;++a){var b=g.list.getItem(a),c=ItemResUtil.findItemres(d[a]);IMG.setBKImage(b.exsubs.icon,IMG.makeBigImg(c.bigpic))}},m=function(){g.list.setCaller({self:b,caller:n})},n=function(a,b){if(c){var e=d[b];c.caller.call(c.self,e)}f.hide()},o=function(){f.show()}})