PROGBAR_SHOWFLAG_NONE=0,PROGBAR_SHOWFLAG_VAL=1,PROGBAR_SHOWFLAG_PER=2,PROGBAR_SHOWFLAG_CUSTOM=3,ProgressBarEx=function(){var a,b,c=100,d=[0,0],e,f,g,h=[null,null],i={count:1,showflag:1},j,k,l,m,n=null,o=!1;this.initialize=function(c,f,g){a=c,b=this,e=f,g&&TQ.dictCopy(i,g),i.uiback||(i.uiback=uiback.progress.comm),i.count?i.count>d.length&&(i.count=d.length):i.count=1,p()},this.setRange=function(a){c=a,s()},this.getRange=function(){return c},this.setValue=function(a,b){d[a]=b,s()},this.getValue=function(a){return d[a]},this.setColor=function(a){for(var b=0;b<h.length;++b)h[b]&&TQ.setCSS(h[b],"backgroundColor",a)},this.show=function(){TQ.setCSS(e,"display","block")},this.hide=function(){TQ.setCSS(e,"display","none")},this.setCustomValCaller=function(a){n=a},this.setShowFlag=function(a){i.showflag=a},this.getText=function(){return TQ.getTextEx(m)},this.setMirror=function(a){o=a},this.isMirror=function(){return o};var p=function(){j=TQ.getDomWidth(e),k=TQ.getDomHeight(e),f=TQ.createDom("div"),TQ.setClass(f,i.uiback.backcls),TQ.setDomWidth(f,j),TQ.setCSS(f,"position","absolute"),TQ.append(e,f),g=TQ.createDom("div"),TQ.setCSS(g,"position","absolute"),TQ.setCSS(g,"zIndex",30),TQ.setDomWidth(g,j),TQ.append(f,g);for(var a=0;a<i.count;++a)h[a]=TQ.createDom("div"),TQ.setCSS(h[a],"position","absolute"),TQ.setCSS(h[a],"left",i.uiback.bar.l+"px"),TQ.setCSS(h[a],"top",i.uiback.bar.t+"px"),TQ.setDomWidth(h[a],j),TQ.setCSS(h[a],"zIndex",a+20),TQ.append(f,h[a]),TQ.setClass(h[a],a==0?i.uiback.barcls:i.uiback.secbarcls),TQ.fixIE6Png(h[a]);q()},q=function(){if(i.uiback.cls.length>1){for(var b in i.uiback.cls){var c=TQ.createDom("div");TQ.setClass(c,i.uiback.cls[b]),TQ.append(g,c),TQ.fixIE6Png(c)}var d=a.getGUI().selectSubDiv(g);i.uiback.type==1||i.uiback.type==2?l=d[1]:i.uiback.type==3&&(l=d[4]),a.getGUI().setUIBack(g,j,k,i.uiback.type)}else i.uiback.cls.length==1&&(TQ.setClass(g,i.uiback.cls[0]),TQ.fixIE6Png(g),l=g);r()},r=function(){if(i.showflag==0)return;m=TQ.createDom("div"),TQ.setCSS(m,"position","absolute"),TQ.setCSS(m,"zIndex",2),TQ.setCSS(m,"color","#ffffff"),TQ.setDomPos(m,0,0),TQ.append(l,m)},s=function(){t(),u(),v()},t=function(){var a=j-i.uiback.bar.l-i.uiback.bar.r;for(var b=0;b<i.count;++b){var e=parseInt(a*d[b]/c,10);e=e>0?e:0,TQ.setDomWidth(h[b],e),o&&(TQ.setCSS(h[b],"left",i.uiback.bar.l+(a-e)+"px"),h[b].style.backgroundPosition=e-a+"px 0px")}},u=function(){var b=i.uiback.bar.l,c=j-i.uiback.bar.l-i.uiback.bar.r;if(TQ.isIE6()&&(i.uiback.type==1||i.uiback.type==3)){var d=a.getGUI().selectSubDiv(g);c=c-TQ.getDomWidth(d[0])-TQ.getDomWidth(d[2]),b+=TQ.getDomWidth(d[0])}m&&(TQ.setDomWidth(m,c),TQ.setCSS(m,"left",b+"px"))},v=function(){var a="";i.showflag==PROGBAR_SHOWFLAG_VAL?a=d[0]+"/"+c:i.showflag==PROGBAR_SHOWFLAG_PER?a=parseInt(d[0]*100/c)+"%":i.showflag==PROGBAR_SHOWFLAG_CUSTOM&&(a=n.caller.call(n.self,d[0],c)),m&&TQ.setText(m,a)};this.initialize.apply(this,arguments)}