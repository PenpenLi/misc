document.domain="qq.com";var iwan={};iwan.ui=jQuery.ffui={},iwan.util=jQuery.util={isArray:function(e){return Object.prototype.toString.apply(e)==="[object Array]"},json2str:function(e){var t=function(e){var n=[],r=[];if(typeof e=="object"&&e!=null){if(Object.prototype.toString.apply(e)==="[object Array]"){for(var i=0;i<e.length;i++)r.push(t(e[i]));return"["+r.join(",")+"]"}for(var o in e)n.push('"'+o+'":'+t(e[o]));return"{"+n.join(",")+"}"}return typeof e=="number"?e:typeof s=="string"?'"'+e+'"':e};return t(e)},cookie:function(e,t,n){if(typeof t=="undefined"){var a=null;if(document.cookie&&document.cookie!=""){var f=document.cookie.split(";");for(var l=0;l<f.length;l++){var c=jQuery.trim(f[l]);if(c.substring(0,e.length+1)==e+"="){a=decodeURIComponent(c.substring(e.length+1));break}}}return a}n=n||{},t===null&&(t="",n.expires=-1);var r="";if(n.expires&&(typeof n.expires=="number"||n.expires.toUTCString)){var i;typeof n.expires=="number"?(i=new Date,i.setTime(i.getTime()+n.expires*24*60*60*1e3)):i=n.expires,r="; expires="+i.toUTCString()}var s=n.path?"; path="+n.path:"",o=n.domain?"; domain="+n.domain:"",u=n.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),r,s,o,u].join("")},cookieData:function(e,t,n){this.cookie(e,t,n)},random:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},getDayCN:function(e){var t=["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"];if(!e)return t[(new Date).getDay()];var n=new Date,r=e.split("-");return n.setDate(parseInt(r[2],10)),n.setMonth(parseInt(r[1],10)-1),n.setFullYear(parseInt(r[0],10)),t[n.getDay()]},copyToClipboard:function(e){window.clipboardData?(window.clipboardData.clearData(),window.clipboardData.setData("Text",e),alert("\u590d\u5236\u6210\u529f")):alert("\u60a8\u6240\u4f7f\u7528\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u590d\u5236\uff0c\u8bf7\u624b\u52a8\u590d\u5236")},getUrlParams:function(e){if(e.indexOf("?")==-1)return null;e=e.split("?")[1].split("#")[0];var t=e.split("&"),n="",r={};return $(t).each(function(e,t){n=t.split("="),r[n[0]]=n[1]}),r},getLocalParams:function(){return this.getUrlParams(location.href)},countByteLength:function(e,t){var n=0;for(var r=0;r<e.length;r++)/[\x00-\xff]/.test(e.charAt(r))?n+=1:n+=t;return n},getCutNick:function(e,t,n){var r=0,i="";for(var s=0;s<e.length;s++)/[\x00-\xff]/.test(e.charAt(s))?r+=1:r+=2,r<=t&&(i+=e.charAt(s));return r>t?i:e},isIE6:function(){return $.browser.msie&&$.browser.version=="6.0"},isNum:function(e){return/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},isMac:function(){return/macintosh|mac os x/i.test(navigator.userAgent)},isWindows:function(){return/windows|win32/i.test(navigator.userAgent)},isLinux:function(){return/linux/i.test(navigator.userAgent)},addFavorite:function(e,t){document.all?window.external.addFavorite(t,e):window.sidebar?window.sidebar.addPanel(e,t,""):this.isMac()?alert("\u5bf9\u4e0d\u8d77, \u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u6b64\u529f\u80fd, \u8bf7\u6309 \u2318 + D \u6536\u85cf\u3002"):alert("\u5bf9\u4e0d\u8d77, \u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u6b64\u529f\u80fd, \u8bf7\u6309 Ctrl + D \u6536\u85cf\u3002")},getDateFormat:function(e){var t=new Date,n,r,i,s,o;t.setTime(e),n=t.getFullYear(),r=t.getMonth()+1,i=t.getDate(),s=t.getHours(),o=t.getMinutes(),r=r<10?"0"+r:r,i=i<10?"0"+i:i,s=s<10?"0"+s:s,o=o<10?"0"+o:o;var u={"m\u6708d\u65e5":r+"\u6708"+i+"\u65e5","HH:ss":s+":"+o,"yyyy-MM-dd HH:ss":n+"-"+r+"-"+i+" "+s+":"+o};return u}},jQuery.fn.extend({centerShow:function(){var e=this,t=function(e){return function(){var t=$(e).outerWidth(!0),n=$(e).outerHeight(!0),r=$(window).height(),i=$(window).width();$(e).css({position:"fixed",left:Math.floor((i-t)/2),top:Math.floor((r-n)/2)})}};$.browser.msie&&$.browser.version=="6.0"?this.each(function(){e.show()}):this.each(function(){t(this)(),$(e).show(),$(window).resize(t(this))})},posShow:function(e){var t=this;if($.browser.msie&&$.browser.version=="6.0"){var n={};$.extend(n,e);var r=$(t).height(),i=function(){typeof e["bottom"]!="undefined"?(n.bottom=parseInt(e.bottom),n.zoom=1,$(t).css(n),n.zoom=0):(n.top=e.top+$(window).scrollTop(),$(t).css(n))};i(),$(window).scroll(function(){i()}).resize(function(){i()})}else $.extend(e,{position:"fixed",display:"block"}),$(t).css(e);return this},drag:function(e){var t={rollback:!1,mouseup:function(){},mousedown:function(){}};$.extend(t,e);var n=$(this);n.css({position:"absolute"});var r=!1,i="",s=0,o=0,u={x:0,y:0},a={x:0,y:0},f=!1;n.mousedown(function(e){return f||(i=n.offset(),s=e.pageX-i.left,o=e.pageY-i.top,u.x=i.left,u.y=i.top,t.mousedown(),r=!0),!1}),$(document).mouseup(function(){return f||(i=n.offset(),a.x=i.left,a.y=i.top,r=!1,t.mouseup(),t.rollback&&l()),!1}),$(document).mousemove(function(e){return r&&n.css({left:e.pageX-s,top:e.pageY-o}),!1});var l=function(){if(a.x==u.x&&a.y==u.y)return;f=!0;var e=20,t={x:Math.abs(a.x-u.x),y:Math.abs(a.y-u.y)},r={x:0,y:0};t.x<=e?r.x=1:r.x=Math.round(t.x/e),t.y<=e?r.y=1:r.y=Math.round(t.y/e);var i=setInterval(function(){r.x!=0&&a.x!=u.x&&(a.x>u.x?a.x-=r.x:a.x+=r.x),r.y!=0&&a.y!=u.y&&(a.y>u.y?a.y-=r.y:a.y+=r.y),n.css({left:a.x,top:a.y}),e--,e==0&&(clearTimeout(i),n.css({left:u.x,top:u.y}),f=!1)},15)}},ajaxSubmitForm:function(e){var t={type:"post",url:"",success:function(){}},n=$(this),r=["input","select","textarea"],i=function(e){var t={},r="",i=!0;return n.find(e).each(function(n,i){r=$(i).attr("type"),e=="input"?r!="button"&&r!="submit"&&r!="radio"&&r!="checkbox"&&(t[$(i).attr("name")]=$(i).val()):t[$(i).attr("name")]=$(i).val()}),t},s=function(){var e={};return n.find("input:checked").each(function(t,n){e[$(n).attr("name")]=$(n).val()}),e},o={};$(r).each(function(e,t){$.extend(o,i(t))}),$.extend(o,s()),t.data=o,$.extend(t,e),$.ajax(t)},showTip:function(e){var t={tipId:"showTip",hover:!0,relyId:"",style:"show-tip",time:500,text:function(){},content:function(){return""}};$.extend(t,e);var n=$("#"+t.tipId);n.size()==0&&(n=$("<div id='"+t.tipId+"'  style='position: absolute;z-index: 99999;display:none;' class='"+t.style+"' ></div>"),$("body").append(n));var r=function(e){return"<table><tbody><tr><td id='lolTipHtml' >"+e+"</td><th></th></tr></tbody><tfoot><tr><td></td> <th></th></tr></tfoot></table>"},i="",s=!1,o=0,u=0,a="",f="",l=$(window),c=0,h=0,p=0,d=0,v=!0,m="";if(t.relyId!=""){m=$("#"+t.relyId),o=m.outerWidth(),u=m.outerHeight();var g=0,y=0,b=m.get(0);while(b.offsetParent)g+=b.offsetLeft,y+=b.offsetTop,b=b.offsetParent;g+=b.offsetLeft,y+=b.offsetTop,o+=g,u+=y}var w=function(){v=!0,v&&(a=n.outerWidth(),f=n.outerHeight(),c=l.width()+l.scrollLeft(),h=l.height()+l.scrollTop(),p=o<=c&&o!=0?o:c,d=u<=h&&u!=0?u:h,v=!1)},E=function(e){n.css({top:(e.pageY+f+20<d-10?e.pageY+20:d-f-10)+"px",left:(e.pageX+a+10<p?e.pageX+10:e.pageX-a)+"px"})},S="",x="";return $(this).mouseenter(function(e){var r=this;return x=e,clearTimeout(S),S=setTimeout(function(){$.isFunction(t.text)?i=t.text(r):i=t.text,n.html(i).show(),w(),E(x),s=!0},t.time),!1}).mouseleave(function(e){return s?(n.hide(),s=!1):S!=""&&clearTimeout(S),!1}),t.hover&&$(this).mousemove(function(e){x=e,s&&(E(e),n.show())}),this}}),function(e,t){function r(t,n){var r=e(t).find("div.img-box");r.removeClass().addClass("img-box img-"+n.effect);var i=r.children();if(n.effect=="slideLeftRight")for(var s=0;s<i.size();s++)s!=0&&i.eq(s).hide();e(t).find("div.title-box").removeClass().addClass("title-box title-"+n.titleEffect)}function i(e,t){e.removeClass("here"),e.eq(t).addClass("here")}function o(t,n){var r=e(t).find("div.btn-box").find("a"),i=e(t).find("div.img-box");s[n.effect](r,i,n)}function u(t){var n=e(t).find("div.img-box");return n.children().size()==1?!0:!1}var n={event:"mouseenter",effect:"default",titleEffect:"default",autoPlay:!0,arrow:!1},s={"default":function(e){params.$imgs.hide(),params.$imgs.eq(params.index).show()},fadeIn:function(e){e.$imgs.hide(),e.$imgs.eq(e.index).fadeIn("slow")},slideUpDown:function(e,t,n){function o(e){t.animate({top:-(e*s)},{duration:400})}var r=0,s=t.children().eq(0).outerHeight(!0),u=function(t){return function(){i(e,t),o(t)}},a="";e.bind(n.event,function(){return r=e.index(this),a=setTimeout(u(r),350),!1}).mouseleave(function(){clearTimeout(a)}).click(function(){return!1})},slideLeftRight:function(e,t){function c(e){for(var t=0;t<r.size();t++)t!=e&&r.eq(t).hide()}function h(e,r){lock=!0;var i=0;a=setInterval(function(){i>=-15?i-=3:i<=-(n-15)?i-=3:i-=30,-i>n?(clearTimeout(a),c(e),t.css({left:0}),r&&r()):t.css({left:i})},l)}function p(e,r){lock=!0;var i=-n;t.css({left:i}),a=setInterval(function(){i<=-(n-15)?i+=2:i>=-15?i+=2:i+=30,i>0?(clearTimeout(a),c(e),t.css({left:0}),lock=!1,r&&r()):t.css({left:i})},l)}function d(e,t){clearTimeout(a),r.eq(e).show(),e>u?h(e,t):p(e,t),u=e}function g(){f=setTimeout(function(){o+=1,o>=s&&(o=0),i(e,o),d(o,function(){g()})},5e3)}var n=t.children().eq(0).outerWidth(!0),r=t.children(),s=r.size(),o=0,u=-1,a="",f="",l=15,v=function(t,n){return function(){o=e.index(t),i(e,o),d(o,n)}},m="";e.hover(function(){clearTimeout(f);var t=e.index(this);t!=u&&(m=setTimeout(v(this),350))},function(){clearTimeout(m),g()}),t.mouseenter(function(){clearTimeout(f)}).mouseleave(function(){g()}),g()}},a=function(e,t){r(e,t),u(e)||o(e,t)};e.fn.iwanSlider=function(t){this.each(function(r,i){var s=e.extend({},n,t);a(i,s)})}}(jQuery),function(e){e.singleton=function(e){var t;return function(){return t||(t=e.apply(this,arguments))}},e.mask=e.singleton(function(){var e=$("<div/>");return e.css({opacity:.5,filter:"alpha(opacity=50)","background-color":"#000000","z-index":198,position:"absolute",width:"100%",height:$("body").height(),top:0,left:0,display:"none"}),$("body").append(e),e}),e.resizeFrame=function(e){var t=document.getElementById(e);try{var n=t.contentWindow.document.body.scrollHeight,r=t.contentWindow.document.documentElement.scrollHeight,i=Math.max(n,r),s=$(window).height();i=Math.max(i,s-35),t.style.height=i+"px"}catch(o){}},e.resizeGameFrame=function(e){var t=$(window).height();e=Math.max(e,t-35);var n=document.getElementById("gameFrame");n!=null&&(n.style.height=e+"px")}}(iwan.ui),function(e){e.tab=function(e){var t={btnId:"btn",boxId:"box",tabHere:"here",hereIndex:0,event:"click",effect:0,autoPlay:!1,tabId:"tab"};$.extend(t,e);if(t.btnId==""||t.btnId=="btn")t.btnId=t.tabId;var n="",r=new Array,i=0;n=$("#"+t.btnId).children(),$(t.boxId.split(",")).each(function(e){r.push($("#"+this).children())}),i=n.size();var s=t.hereIndex,o=t.hereIndex;if(typeof t.tabHere=="string"){var u=t.tabHere;t.tabHere=new Array;for(var a=0;a<i;a++)t.tabHere.push(u)}(t.effect==1||t.effect==2)&&r[0].css({position:"absolute",top:0,left:0});var f=!0,l={0:function(e){$(r).each(function(e){r[e].eq(o).hide(),r[e].eq(s).show()}),e&&e()},1:function(e){$(r).each(function(t){t==0?(f=!1,r[t].eq(o).fadeOut("slow"),r[t].eq(s).fadeIn("slow",function(){f=!0,e&&e()})):(r[t].eq(o).hide(),r[t].eq(s).show())})},2:function(e){$(r).each(function(t){t==0?(f=!1,r[t].css({"z-index":2}),r[t].eq(o).css({"z-index":3}),r[t].eq(s).css({"z-index":4,display:"none"}).show("slow",function(){f=!0,e&&e()})):(r[t].eq(o).hide(),r[t].eq(s).show())})},3:function(){$(r).each(function(e){e==0?(f=!1,r[e].css({"z-index":2}),r[e].eq(o).css({"z-index":3}),r[e].eq(s).css({"z-index":4,display:"none"}).show("slow",function(){f=!0,complete&&complete()})):(r[e].eq(o).hide(),r[e].eq(s).show())})},4:function(){}},c=function(e){s!=o&&f&&(n.eq(o).removeClass(t.tabHere[o]),n.eq(s).addClass(t.tabHere[s]),l[t.effect](e),o=s)};n.bind(t.event,function(){return s=n.index(this),h!=""&&clearInterval(h),c(function(){t.autoPlay&&p()}),!1});var h="",p=function(){h=setInterval(function(){s<i-1?s++:s=0,c()},5e3)};t.autoPlay&&p()},e.birthday=function(e,t){var n={yid:"yid",mid:"mid",did:"did",xzid:""};$.extend(n,e);var r=new Date,i=$("#"+n.yid),s=$("#"+n.mid),o=$("#"+n.did),u=$("#"+n.xzid),a=r.getFullYear(),f=r.getMonth(),l=0,c=function(e,t){return"\u9b54\u7faf\u6c34\u74f6\u53cc\u9c7c\u767d\u7f8a\u91d1\u725b\u53cc\u5b50\u5de8\u87f9\u72ee\u5b50\u5904\u5973\u5929\u79e4\u5929\u874e\u5c04\u624b\u9b54\u7faf".substr(e*2-(t<"102223444433".charAt(e-1)- -19)*2,2)},h=function(){u.html(c(s.val(),o.val()))},p=function(){var e="";for(var t=a;t>=1900;t--)e+="<option value='"+t+"'>"+t+"\u5e74</option>";i.html(e),i.change(function(){v(i.val(),s.val())})},d=function(){var e="";for(var t=1;t<=12;t++)e+="<option value='"+t+"'>"+t+"\u6708</option>";s.html(e),s.change(function(){v(i.val(),s.val())})},v=function(e,t){var n=0;t==1||t==5||t==7||t==8||t==10||t==12?n=31:t!=2?n=30:e%4==0&&e%100!=0||e%400==0?n=29:n=28;var r="";for(var i=1;i<=n;i++)r+="<option value='"+i+"'>"+i+"\u65e5</option>";o.html(r)};o.change(function(){h()}),p(),d(),v(a,f);var m={y:a,m:1,d:1};$.extend(m,t),setTimeout(function(){i.val(m.y).change()},20),setTimeout(function(){s.val(m.m).change()},20),setTimeout(function(){o.val(m.d).change()},300)},e.nation=function(e,t){var n={nid:"",pid:"",cid:""};$.extend(n,e);var r={n:"",p:"",c:""};$.extend(r,t);var i=$("#"+n.nid),s=$("#"+n.pid),o=$("#"+n.cid),u=function(e,t){$.getJSON("/profile/getcity",e,function(e){t&&t(e)})},a=function(e){var t="";return $.each(e,function(e,n){t+="<option value='"+e+"' >"+n+"</option>"}),t};u(null,function(e){i.html("<option value='' >\u56fd\u5bb6/\u5730\u533a</option>"+a(e)).hide().show(),r.n!=""&&setTimeout(function(){i.val(r.n).change()},20)}),i.change(function(){u({nation:$(this).val()},function(e){i.val()==1?(s.html("<option value='' >\u7701\u4efd</option>"+a(e)),s.hide().show(),r.p!=""&&setTimeout(function(){s.val(r.p).change()},20)):(s.html("").hide(),e!=""?(o.html("<option value='' >\u57ce\u5e02</option>"+a(e)),o.hide().show(),r.c!=""&&setTimeout(function(){o.val(r.c).change()},20)):o.html("").hide())})}),s.change(function(){u({nation:i.val(),province:$(this).val()},function(e){o.html("<option value='' >\u57ce\u5e02</option>"+a(e)),r.c!=""&&setTimeout(function(){o.val(r.c).change()},20)})})}}(iwan.ui),function(e){e.dialog=function(t){e.dialog.o=$.extend({},e.dialog.defaults,t);var n=e.dialog.createDialog();n.find("div.title>span").html(e.dialog.o.title),n.find("div.main").html(e.dialog.o.text),e.dialog.o.type=="confirm"?(n.find("a.btn-cancel").css("display","inline-block"),n.find("a.btn-ok").css("display","inline-block")):e.dialog.o.type=="alert"?(n.find("a.btn-cancel").hide(),n.find("a.btn-ok").css("display","inline-block")):e.dialog.o.type=="tip"&&(n.find("a.btn-cancel").hide(),n.find("a.btn-ok").hide()),e.dialog.o.showBefore(n),n.removeClass().addClass("ui-dialog "+e.dialog.o.addClass),n.centerShow(),e.mask().show()},e.dialog.o={},e.dialog.defaults={title:"",confirm:!1,type:"alert",text:"",addClass:"",showBefore:function(){},ok:function(){return!0},cancel:function(){return!0}},e.dialog.createDialog=e.singleton(function(){var t=$("<div class=''><div class='title'><span></span><a href='#' class='close' ></a></div><div class='main'></div><div class='foot' ><a href='#' class='btn-ok' >\u786e&nbsp;\u5b9a</a><a href='#' class='btn-cancel' >\u53d6&nbsp;\u6d88</a></div></div>"),n=e.mask(),r=function(){t.hide(),n.hide()};return t.find("a.close").click(function(){return e.dialog.o.cancel()==0?!1:(r(),!1)}),t.find("a.btn-ok").click(function(){return e.dialog.o.ok()==0?!1:(r(),!1)}),t.find("a.btn-cancel").click(function(){return e.dialog.o.cancel()==0?!1:(r(),!1)}),$("body").append(t),t})}(iwan.ui),function(e){function n(e){e.find(".text").html(t.text)}function r(e){e.css({top:t.pos.y,left:t.pos.x}).fadeIn("slow")}var t={};e.miniDialog=function(i){t=$.extend({},e.miniDialog.defaults,i);var s=e.miniDialog.getDialog();n(s),r(s)};var i=function(e){var n=e.find(".btn-ok"),r=e.find(".btn-cancel");n.click(function(){return t.ok()==0?!1:(e.hide(),!1)}),r.click(function(){return t.cancel()==0?!1:(e.hide(),!1)})},s=function(){var e='<div class="ui-mini-dialog" ><div class="text" ></div><div class="btnset"><a class="btn-ok" href="#">\u786e\u5b9a</a><a class="btn-cancel" href="#">\u53d6\u6d88</a></div></div>',t=$(e);return $("body").append(t),i(t),t};e.miniDialog.getDialog=e.singleton(s),e.miniDialog.defaults={pos:{x:0,y:0},text:"",ok:function(){return!0},cancel:function(){return!0}}}(iwan.ui),function(e){e.slider=function(e){var t={type:0,btnLeft:"",btnRight:"",scBox:"",step:200,timer:500,count:4,showCount:4,isTurn:!0,top:0,left:0,startCount:0,autoPlay:!0};$.extend(t,e);var n=!0;t.btnLeft.click(function(){return n&&(p(),l(!1)),!1}),t.btnRight.click(function(){return n&&(p(),l(!0)),!1});var r=t.scBox,i=r.children().size(),s=t.startCount,o=t.left,u=t.top,a="";r.css({left:o,top:u}),t.isTurn?r.append(r.children().clone()):(t.btnLeft.hide(),i==1&&t.btnRight.hide());var f=function(){s+t.showCount==i?t.btnRight.hide():t.btnRight.show(),s!=0?t.btnLeft.show():t.btnLeft.hide()},l=function(e){n=!1;if(t.type==1){a="top";if(!e)t.isTurn?(s==0&&(s=i,r.css(a,-(s*t.step)+"px")),u=-(s-1)*t.step):s!=0&&(u=-(s-1)*t.step);else if(t.isTurn||!t.isTurn&&s!=i-t.showCount)u=-(s+1)*t.step}else{a="left";if(!e)t.isTurn?(s==0&&(s=i,r.css(a,-(s*t.step)+"px")),o=-(s-1)*t.step):s!=0&&(o=-(s-1)*t.step);else if(t.isTurn||!t.isTurn&&s!=i-t.showCount)o=-(s+1)*t.step}r.animate({left:o+"px",top:u+"px"},{duration:t.timer,complete:function(){if(e)s+=1,t.isTurn?s>i-1&&(s=0,r.css(a,"0px")):(s+t.showCount>i&&(s-=1),f());else{if(t.isTurn||!t.isTurn&&s!=0)s-=1;t.isTurn||f()}n=!0,h()}})},c="",h=function(){t.autoPlay&&(c=setTimeout(function(){l(!0)},3e3))},p=function(){t.autoPlay&&clearTimeout(c)};h()}}(iwan.ui),function(e){e.tip=function(t){var n=$.extend({},e.tip.defaults,t),r=e.tip.createTip();r.html(n.text).addClass(n.addClass).centerShow(),setTimeout(function(){r.fadeOut("slow",n.hideFn)},n.timer)},e.tip.defaults={text:"",timer:1e3,addClass:"",hideFn:function(){}},e.tip.createTip=e.singleton(function(){var e=$("<div class='ui-tip'></div>");return e.click(function(){e.hide()}),$("body").append(e),e})}(iwan.ui),function(e){function t(e){this.options=e,this.crtate()}e.select=function(n){var r=$.extend({},e.select.defaults,n);new t(r)},t.prototype={options:null,$selectBox:null,crtate:function(){var e=[];e.push('<div class="ui-select"><div><span></span><em></em></div><ul></ul></div>'),this.$selectBox=$(e.join("")),this.setItems(),$(this.options.target).html(this.$selectBox),this.options.disabled||this.addEvent()},setText:function(e,t){this.$selectBox.find("div").attr("data-value",t),this.$selectBox.find("div>span").html(e),this.options.disabled&&this.$selectBox.find("div").addClass("disabled")},setItems:function(){var e=this,t=this.$selectBox.find("ul"),n=[],r=this.options.items,i="";$(r).each(function(){this.selected=="selected"?(e.setText(this.text,this.value),i="here"):i="",n.push("<li><a href='#' target='_self' class='"+i+"' data-value='"+this.value+"' >"+this.text+"</a></li>")}),t.html(n.join("")),r.length>10&&t.css({"overflow-y":"auto",height:200})},hideAllList:function(){$("div.ui-select").find("ul").hide()},addEvent:function(){var e=this,t=this.$selectBox.find("ul"),n=this.options.items,r=this.options.onSelect,i=!1;this.$selectBox.mousedown(function(n){return e.hideAllList(),i?t.hide():t.show(),i=!i,!1});var s=t.find("a"),o=0;s.click(function(u){return s.removeClass("here"),$(this).addClass("here"),o=s.index(this),e.setText(n[o].text,n[o].value),t.hide(),i=!1,r&&r(o,n[o].value,n[o].text),!1}),t.mouseup(function(){return!1}).mousedown(function(){return!1}),$("html").mousedown(function(){t.hide(),i=!1})}},e.select.defaults={target:"",items:[{value:"1",text:"222",selected:"selected"}],disabled:!1,onSelect:function(e,t,n){}}}(iwan.ui),function(e){function t(e){this.options=e,this.create()}e.gameServer=function(n){var r=$.extend({},e.gameServer.defaults,n);new t(r)},t.prototype={$gameServerBox:null,allData:null,areaData:null,serverData:null,roleData:null,dataNotFind:!1,loadData:function(e,t){$.getJSON("http://iwan.qq.com/interface/getarea",{gameId:e,rd:(new Date).getTime()},function(e){t&&t(e)})},createBox:function(){var e=[];e.push('<div class="ui-gameServer">'),e.push('<div class="t">\u9009\u62e9\u5151\u6362\u7684\u89d2\u8272\u4fe1\u606f\uff1a</div>'),e.push('<div class="sel area" ></div>'),e.push('<div class="sel server" ></div>'),e.push('<div class="sel role"></div>'),e.push('<div class="btnset" ><a href="#" class="btn-ok" >\u786e&nbsp;\u5b9a</a><a href="#" class="btn-cancel" >\u53d6&nbsp;\u6d88</a></div>'),e.push("</div>"),this.$gameServerBox=$(e.join("")),this.createNullSelect(),$(this.options.target).html(this.$gameServerBox),this.addBtnEvent()},addBtnEvent:function(){var e=this.$gameServerBox.find("a.btn-ok"),t=this.$gameServerBox.find("a.btn-cancel"),n=this;e.click(function(){var e=n.getNowValue();return e[2]!=0&&n.saveInfo(e[0],e[1],e[2]),n.options.ok(e[0],e[1],e[2]),!1}),t.click(function(){return n.options.cancel(),!1})},getNowValue:function(){var e=this.$gameServerBox.find(".ui-select>div");return[e.eq(0).attr("data-value"),e.eq(1).attr("data-value"),e.eq(2).attr("data-value")]},isDataNotFind:function(){var e=this,t=!0;e.getAreaId()!=-1&&$(e.allData.JSON_area).each(function(){if(e.getAreaId()==this.sAreaID)return t=!1,!1});if(t)return t;if(e.getServerId()!=-1){var n=this.allData.JSON_area_server[e.getAreaId()];$(n).each(function(){if(this==e.getServerId())return t=!1,!1})}return t},setArea:function(e){var t=this,n=[{text:"\u8bf7\u9009\u62e9\u5927\u533a",value:0}];if(t.getAreaId()==-1||!e||t.dataNotFind)n=[{text:"\u8bf7\u9009\u62e9\u5927\u533a",value:0,selected:"selected"}];t.allData&&$(t.allData.JSON_area).each(function(){t.getAreaId()==this.sAreaID&&!t.dataNotFind?n.push({text:this.sAreaName,value:this.sAreaID,selected:"selected"}):n.push({text:this.sAreaName,value:this.sAreaID})}),iwan.ui.select({target:this.$gameServerBox.find(".area"),items:n,disabled:this.options.disabled,onSelect:function(e,n){t.setServer(n),t.setRole()}})},setServer:function(e,t){var n=this,r=[{text:"\u8bf7\u9009\u62e9\u670d\u52a1\u5668",value:0}];if(n.getServerId()==-1||!t||n.dataNotFind)r=[{text:"\u8bf7\u9009\u62e9\u670d\u52a1\u5668",value:0,selected:"selected"}];if(e){var i=this.allData.JSON_area_server[e];$(i).each(function(){this==n.getServerId()&&t&&!n.dataNotFind?r.push({text:n.allData.JSON_server[this].sServerName,value:this,selected:"selected"}):r.push({text:n.allData.JSON_server[this].sServerName,value:this})})}iwan.ui.select({target:this.$gameServerBox.find(".server"),items:r,disabled:this.options.disabled,onSelect:function(e,t){n.setRole(t)}})},setRole:function(e){var t=this;if(typeof e=="undefined"||e==-1)return iwan.ui.select({target:this.$gameServerBox.find(".role"),items:[{text:"\u8bf7\u9009\u89d2\u8272",value:0,selected:"selected"}]}),!1;$.ajax({type:"get",url:"http://iwan.qq.com/interface/checkrole",dataType:"json",data:{gameId:t.options.gameId,serverId:e,rand:(new Date).getTime()},success:function(e){var n=[];e["success"]==1?(n.push({text:"\u8bf7\u9009\u62e9\u89d2\u8272",value:0,selected:t.getRoleId()==-1||t.dataNotFind?"selected":""}),$(e.error).each(function(e,r){n.push({text:decodeURIComponent(r.role_name),value:r.role_id,selected:t.getRoleId()==r["role_id"]&&!t.dataNotFind?"selected":""})})):n.push({text:"\u6ca1\u6709\u89d2\u8272",value:0,selected:"selected"}),iwan.ui.select({target:t.$gameServerBox.find(".role"),items:n})}})},createSelect:function(){var e=this;e.setArea(!0),e.setServer(e.getAreaId(),!0),e.setRole(e.getServerId(),!0)},createNullSelect:function(){this.setArea(),this.setServer(),this.setRole()},saveInfo:function(e,t,n){var r=this,i=iwan.util.cookie("iwan_fuli_selRole"),s="",o={},u=$app.auth.getQQNum(),a=function(){var e=0,t=0,n="";$.each(o,function(r,i){e+=1,i.time>t&&(t=i.time,n=r)}),e==10&&delete o[n]},f=function(){var e=0,t=0,n="";$.each(o[u],function(r,i){e+=1,i[3]>t&&(t=i[3],n=r)}),e>=10&&delete o[u][n]};i==null?o[u]={}:/\|/g.test(i)?o[u]={}:(o=$.parseJSON(i),typeof o[u]=="undefined"&&(a(),o[u]={})),f(),o[u][r.options.gameId]=[e,t,n,(new Date).getTime()],o[u].time=(new Date).getTime(),s=iwan.util.json2str(o),iwan.util.cookie("iwan_fuli_selRole",s,{expires:30,path:"/",domain:"iwan.qq.com",secure:!1})},getQQInfo:function(){var e=iwan.util.cookie("iwan_fuli_selRole"),t={};return e!=null&&!/\|/g.test(e)&&(t=$.parseJSON(e)),typeof t[$app.auth.getQQNum()]=="undefined"?[-1,-1,-1]:typeof t[$app.auth.getQQNum()][this.options.gameId]=="undefined"?[-1,-1,-1]:t[$app.auth.getQQNum()][this.options.gameId]},getRoleId:function(){return parseInt(this.getQQInfo()[2],10)},getAreaId:function(){return this.options.areaId==-1?parseInt(this.getQQInfo()[0],10):this.options.areaId},getServerId:function(){return this.options.serverId==-1?parseInt(this.getQQInfo()[1],10):this.options.serverId},create:function(){var e=this;this.createBox(),this.loadData(this.options.gameId,function(t){e.allData=t,e.dataNotFind=e.isDataNotFind(),e.createSelect()})},init:function(){}},e.gameServer.defaults={target:"",gameId:8,areaId:-1,serverId:-1,disabled:!1,ok:function(){},cancel:function(){}}}(iwan.ui),function(e){function r(){$.getJSON("http://iwan.qq.com/fuli/check",{id:t.itemId,rd:(new Date).getTime()},function(e){e.success==1?(e.msg==1?a(e.vcode):u(e.vcode),e.vcode==1&&i()):c(e.error)})}function i(){loader("verifycode/verifycode",function(){$app.verifycode.nchangeImg("imgVerify"),$("#imgVerify,#btnChVerify").click(function(){return $app.verifycode.nchangeImg("imgVerify"),!1})})}function s(){return $("#txtVerify").val()!=""?!0:($("#errVerify").html("\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801").show(),!1)}function o(){var e=[];return e.push("<div class='ui-verify' >"),e.push("<dl class='clearfix'>"),e.push("<dt><img id='imgVerify'  src='' title='\u770b\u4e0d\u6e05\u695a\uff0c\u6362\u4e00\u5f20' /></dt>"),e.push("<dd><div><input id='txtVerify' maxlength='4' type='text' /></div><a id='btnChVerify' href='#'>\u770b\u4e0d\u6e05\u695a\uff0c\u6362\u4e00\u5f20</a></dd>"),e.push("</dl>"),e.push("<label id='errVerify' >111</label>"),e.push("</div>"),e.join("")}function u(n){e.dialog({title:"",type:"confirm",text:"<div class='text' >"+t.text+"</div>"+(n==1?o():""),addClass:"ui-dialog-receivePack2",ok:function(){if(n==1){if(!s())return!1;l("","",$("#txtVerify").val())}else l("","","")}})}function a(t){e.dialog({type:"tip",addClass:"ui-dialog-receivePack",showBefore:function(e){f(e,t),t==1&&e.find(".btnset").before(o())}})}function f(e,n){iwan.ui.gameServer({target:e.find(".main"),gameId:t.gameId,areaId:t.areaId,serverId:t.serverId,disabled:t.disabled,ok:function(t,r,i){i!=0&&(n==1?s()&&(l(r,i,$("#txtVerify").val()),e.find("a.close").click()):(l(r,i,""),e.find("a.close").click()))},cancel:function(){e.find("a.close").click()}})}function l(e,n,r){$.getJSON("http://iwan.qq.com/fuli/exchange",{id:t.itemId,serverId:e,roleId:n,verify:r,rd:(new Date).getTime()},function(e){e.success==11?c("\u9886\u53d6\u6210\u529f"):e.success==7?h(e.success,e.error,e.msg):c(e.error)})}function c(e){iwan.ui.tip({text:e,timer:2e3})}function h(e,n,r){var i=this,s={2:n,3:"\u8bf7\u60a8\u5148\u767b\u5f55\uff01",5:'\u5bf9\u4e0d\u8d77\uff0c\u60a8\u7684\u94b1\u5e01\u4e0d\u8db3!<br/><a class="c2" style="font-size:14px;margin-top:10px;display:inline-block;" href="http://iwan.qq.com/index?n=newsText&nid=15">\u5982\u4f55\u83b7\u5f97\u94b1\u5e01</a>',6:"<div class='cdkey' ><div class='t'>\u6210\u529f\u83b7\u5f97"+$("#txtName_"+i.fid).attr("name")+"</div><div class='np'><em>QQ\u5145\u503c\u5361\u53f7\u7801 :</em><span>"+n.split(",")[0]+"</span><a class='btn-org btn-copy' href='###'>\u590d\u5236</a></div><div class='np'><em>QQ\u5145\u503c\u5361\u5bc6\u7801:</em><span>"+n.split(",")[1]+"</span><a class='btn-org btn-copy' href='###'>\u590d\u5236</a></div><div class='comm'><a href='"+$("#btnDh_"+i.fid+"_"+i.gid).attr("href")+"' target='_blank' class='c1' >&gt;&gt;\u53bb\u5145\u503cQ\u5e01\u5361</a><a href='http://iwan.qq.com/index?n=newsText&nid=24' target='_blank' class='c4'>\u5145\u503c\u8bf4\u660e</a></div><div class='comm'>\u5361\u53f7\u5bc6\u7801\u5df2\u5b58\u5165<a href='http://iwan.qq.com/profile/fuli' target='_blank' class='c4' >\u798f\u5229\u7bb1</a>\uff0c\u65b9\u4fbf\u60a8\u968f\u65f6\u67e5\u770b</div></div>",7:"<div class='cdkey' ><div class='t'>\u5151\u6362\u6210\u529f</div><div class='np np1'><em>CDKEY:</em><span>"+n+"</span><a class='btn-org btn-copy' href='###'>\u590d\u5236</a></div><div class='comm comm1'><a href='"+t.activeUrl+"' target='_blank' class='c1' >&gt;&gt;\u7acb\u523b\u6fc0\u6d3bcdkey</a></div><div class='comm comm1'>cdkey\u5df2\u5b58\u5165<a href='http://iwan.qq.com/profile/fuli' class='c4' target='_blank' >\u798f\u5229\u7bb1</a>\uff0c\u65b9\u4fbf\u60a8\u968f\u65f6\u67e5\u770b</div></div>",8:" idip \u9886\u53d6\u53d1\u9001\u6210\u529f",9:n+"<br/><a class='c2' href='http://iwan.qq.com/profile/fuli' target='_blank' >\u67e5\u770b\u798f\u5229\u7bb1</a>",11:n,12:"<span style='font-size:18px;'>"+n+"</span><br/><br/>"};iwan.ui.dialog({text:s[e]+r,type:"tip"})}var t={},n={gameId:0,itemId:0,areaId:-1,serverId:-1,disabled:!1,activeUrl:"",text:""};e.receivePack=function(e){t=$.extend({},n,e),r()},$(".btn-copy").live("click",function(){return iwan.util.copyToClipboard($(this).prev().text()),!1})}(iwan.ui),function(e){function t(e){this.o={hasServer:!0},this.o=$.extend({},this.o,e)}e.myMenu=function(e){var n=new t(e);n.init()},t.prototype={loadMenuHtml:function(e){var t=1;this.o.hasServer?t=1:t=0,$("#boxMyMenu").load("http://iwan.qq.com/interface/getPageLeft?have="+t+"&r="+(new Date).getTime(),e)},noLoginEvent:function(){$("#btnLoginOther,#btnLogin").click(function(){return $app.auth.login(),!1})},loginEvent:function(){$("#btnLogout").click(function(){return $app.auth.logout(),!1})},loadLastGame:function(){var e=this;$.getJSON("http://iwan.qq.com/interface/getLatePlayGame",{r:(new Date).getTime()},function(t){e.lastGameEvent(t)})},lastGameEvent:function(){var e=$('li[id^="lastGameBox_"]'),t=$("#boxMyInfo").find(".last-game"),n=e.find(".del"),r="";e.hover(function(){r==""&&$(this).addClass("here")},function(){r==""&&$(this).removeClass("here")}),n.click(function(e){return r=$(this).attr("id").split("_")[1],iwan.ui.miniDialog({pos:{x:e.pageX-60,y:e.pageY-20},text:"\u786e\u5b9a\u8981\u9690\u85cf\u8be5\u6e38\u620f\uff1f",ok:function(){iwan.api.delGameRecord(r,function(){$("#lastGameBox_"+r).remove(),$('li[id^="lastGameBox_"]').size()==0&&t.hide(),r=""})},cancel:function(){$("#lastGameBox_"+r).removeClass("here"),r=""}}),!1}),$("#boxMyInfo").find("a.icon-l").showTip({text:function(e){return $(e).attr("rel")}})},init:function(){var e=this;$app.auth.isLogin()?this.loadMenuHtml(function(){e.loginEvent(),e.lastGameEvent()}):e.noLoginEvent()}}}(iwan.ui),iwan.cookie={saveServerInfo:function(e,t,n,r){var i=this,s=iwan.util.cookie("iwan_fuli_selRole"),o="",u={},a=$app.auth.getQQNum(),f=function(){var e=0,t=0,n="";$.each(u,function(r,i){e+=1,i.time>t&&(t=i.time,n=r)}),e==10&&delete u[n]},l=function(){var e=0,t=0,n="";$.each(u[a],function(r,i){e+=1,i[3]>t&&(t=i[3],n=r)}),e>=10&&delete u[a][n]};s==null?u[a]={}:/\|/g.test(s)?u[a]={}:(u=$.parseJSON(s),typeof u[a]=="undefined"&&(f(),u[a]={})),l(),u[a][e]=[t,n,r,(new Date).getTime()],u[a].time=(new Date).getTime(),o=iwan.util.json2str(u),iwan.util.cookie("iwan_fuli_selRole",o,{expires:30,path:"/",domain:"iwan.qq.com",secure:!1})},getServerInfo:function(e){var t=iwan.util.cookie("iwan_fuli_selRole"),n={};return t!=null&&!/\|/g.test(t)&&(n=$.parseJSON(t)),typeof n[$app.auth.getQQNum()]=="undefined"?[-1,-1,-1]:typeof n[$app.auth.getQQNum()][e]=="undefined"?[-1,-1,-1]:n[$app.auth.getQQNum()][e]},getLastGameId:function(){var e=iwan.util.cookie("iwan_fuli_selRole"),t=$app.auth.getQQNum(),n={};e!=null&&!/\|/g.test(e)&&(n=$.parseJSON(e));var r="",i=0;return n[t]&&$.each(n[t],function(e,t){i<t[3]&&(i=t[3],r=e)}),r},getRoleId:function(e){return parseInt(this.getQQInfo(e)[2],10)},getAreaId:function(e){return parseInt(this.getQQInfo(e)[0],10)},getServerId:function(e){return parseInt(this.getQQInfo(e)[1],10)}},iwan.api={},iwan.api.getScore=function(e){$.ajax({url:"http://iwan.qq.com/interface/getuerscore?r="+(new Date).getTime(),type:"get",dataType:"jsonp",jsonpCallback:"uerscore",success:function(t){t.code==0&&e&&e(t)}})},iwan.api.getNick=function(e){$.ajax({url:"http://iwan.qq.com/interface/getnick?r="+(new Date).getTime(),type:"get",dataType:"jsonp",jsonpCallback:"getnick",success:function(t){e&&e(t)}})},iwan.api.getNewNick=function(e){this.getNick(function(t){t.code==0?e&&e(t.nick):console.log("nick error")})},iwan.api.getBroadcast=function(e){$.ajax({url:"http://iwan.qq.com/interface/getsysnotice?r="+(new Date).getTime(),type:"get",dataType:"jsonp",jsonpCallback:"sysnotice",success:function(t){e&&e(t)}})},iwan.api.delGameRecord=function(e,t){$.ajax({url:"http://iwan.qq.com/interface/hideplayedgame",data:{gid:e,r:(new Date).getTime()},type:"get",dataType:"json",success:function(e){e.success==1&&t&&t(e)}})},iwan.api.savepf=
function(){var e={20100010:"gmw.cn",99100010:"qq.com"},t=function(t){return(new RegExp("^http://([^/]+.)?"+e[t].replace(".",".")+"(/.*|$)","i")).test(document.referrer)},n=iwan.util.getUrlParams(top.location.href);$app.auth.isLogin()&&n&&n.gid&&$.isNumeric(n.gid)&&n.from&&$.isNumeric(n.from)&&$.getScript("http://stat.iwan.qq.com/interface/gamelogin?gameid="+n.gid+"&from="+n.from)},iwan.api.playedGame=function(e,t,n){var r=$("#iframePlayedGame");r.size()==0&&(r=$("<iframe id='iframePlayedGame' name='playedGameRes' />"),$("body").append(r),r.css({display:"none"}));var i=$("#formPlayedGame");i.size()==0&&(i=$('<form id="formPlayedGame" target="playedGameRes" action="http://iwan.qq.com/playedGame" method="post"><input type="hidden" id="hidGameId" name="gameId" /><input id="hidServerId" type="hidden" name="serverId" /><input type="hidden" id="hidServerName" name="serverName" /></form>'),$("body").append(i)),$("#hidGameId").val(e),$("#hidServerId").val(t),$("#hidServerName").val(n),i.submit()},iwan.func={},iwan.func.addOneScore=function(){$app.auth.isLogin()&&$.getJSON("http://iwan.qq.com/interface/reg?r="+(new Date).getTime(),function(e){e.success==1&&(iwan.ui.tip({text:"\u767b\u5f55<span>+1</span>\u94f6\u5e01",timer:2e3,addClass:"ui-tip-add"}),iwan.api.getScore(function(e){var t=$("#boxMyInfo");t.size()>0&&(t=t.find(".qd").find("span"),t.eq(0).html(e.gold),t.eq(1).html(e.silver))}))})};