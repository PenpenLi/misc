local lasttime = os.clock()
g_curtestcases = {}
local resetCurTestCases = function(curFileName)
	if (curFileName == nil) then return end
	
	if string.find(curFileName, '_t.lua') == nil then
		curFileName = string.gsub(curFileName, '.lua', '_t.lua')
	end
	
	local s = ''
	local f = io.open(curFileName, 'r')
	if f ~= nil then
		s = f:read('*all')
		f:close()
	end
	
	for w in string.gfind(s, "suite.addTestCase%((%w+)") do
		table.insert(g_curtestcases, w)
	end
end
resetCurTestCases(arg[1])

require('pub_t')
require('tqService_t')
require('tqItemResUtil_t')
require('tqWUtil_t')
require('timer_t')
require('tqPlayers_t')
require('tqMsgSender_t')
require('tqExpend_t')
require('tqNetCmdHerosHdr_t')
require('tqRankHdrTemplet_t')
require('tqRoleBaseHandler_t')
require('tqStrategyHandler_t')
require('tqCreateRoleHandler_t')
require('tqPkgHandler_t')
require('tqLoginHandler_t')
require('tqBuildResHandler_t')
require('tqCityResHandler_t')
require('tqSysCommander_t')
require('tqUseItemHandler_t')
require('tqEffector_t')
require('tqTimerHdr_t')
require('tqFarmResHandler_t')
require('tqAlliances_t')
require('tqHeroResHandler_t')
require('tqUseTarget_t')
require('tqTowerHandler_t')
require('tqSoldierResHandler_t')
require('tqCultureHandler_t')
require('tqMilitaryHandler_t')
require('tqOutFieldHandler_t')
require('tqCityManager_t')
require('tqExpeditionHdr_t')
require('tqExpeditionTimerHdr_t')
require('tqFightHdr_t')
require('tqFieldHero_t')
require('tqDropItemUtil_t')
require('tqPlayerMgr_t')
require('tqExpedReturnTimerHdr_t')
require('tqUUIDMgr_t')
require('tqMailMgr_t')
require('tqFightResultMaker_t')
require('tqString_t')
require('tqFieldPlayer_t')
require('tqPlayerCityDef_t')
require('tqPlayerWall_t')
require('tqFieldHeroMgr_t')
require('tqArmyMgr_t')
require('tqTowerPlayer_t')
require('tqFightResult_t')
require('tqPlayerSelfField_t')
require('tqCopyFieldPlayer_t')
require('tqArmyContainer_t')
require('tqArmyPlayerGetter_t')
require('tqArmyCampActorsGetter_t')
require('tqFieldArmyContainer_t')
require('tqOwnerFieldPlayer_t')
require('tqFieldCollector_t')
require('tqEnemyContainer_t')
require('tqFavoriteContainer_t')
require('tqSelfFieldChecker_t')
require('tqFieldLevelRefresher_t')
require('tqCityPosPlayer_t')
require('tqSelfFieldHandler_t')
require('tqCultureEffectMgr_t')
require('tqHeroActor_t')
require('tqSoldierActor_t')
require('tqSoldierAttrHelper_t')
require('tqDBConn_t')
require('tqFightActor_t')
require('tqWallActorProxy_t')
require('tqCityDefActor_t')
require('tqCampActorInfoSetterForDebug_t')
require('tqHeroAttrHelper_t')
require('tqUtil_t')
require('tqHero_t')
require('tqPlayerHeroMgr_t')
require('tqPlayerFarm_t')
require('tqPlayerCityRes_t')
require('tqStateContainer_t')
require('tqState_t')
require('tqMailHandler_t')
require('tqCppPlayerVar_t')
require('tqHeroWear_t')
require('tqItemEx_t')
require('tqPlayerPackage_t')
require('tqMapCppArrayList_t')
require('tqMapCppSet_t')
require('tqMail_t')
require('tqShopHandler_t')
require('tqItemOpHandler_t')
require('tqGemUtil_t')
require('tqPlayerFightRefState_t')
require('tqFriendHandler_t')
require('tqPlayerFriendMgr_t')
require('tqSkillEffectUtil_t')
require('tqWorldBlessQueue_t')
require('tqPlayerCultures_t')
require('tqHeroSteel_t')
require('tqGameApp_t')
require('tqCityDefHandler_t')
require('tqExpendResMaker_t')
require('tqExchangeExpHandler_t')
require('tqOut_t')
require('tqFightRefStateHandler_t')
require('tqBriefPlayer_t')
require('tqRoleStateHandler_t')
require('tqChatHandler_t')
require('tqWorldMsgQueue_t')
require('tqAllianceHandler_t')
require('tqValidChecker_t')
require('tqSet_t')
require('tqOtherPlayerInfoHdr_t')
require('tqTradingArea_t')
require('tqTradingAreaHdr_t')
require('tqExileRolesRefresher_t')
require('tqActTowerHdr_t')
require('tqPlayerActTower_t')
require('tqActTowerRank_t')
require('tqActTerraceHdr_t')
require('tqPlayerActTerrace_t')
require('tqStateCityHandler_t')
require('tqPlayerTask_t')
require('tqTaskHandler_t')
require('tqTaskFinisher_t')
require('tqActivityValHandler_t')
require('tqServerActEffect_t')
require('tqRoleRank_t')
require('tqNewcomerHelperHdr_t')
require('tqFightStateRepository_t')
require('tqPlayerClientCfg_t')
require('tqItemHandler_t')
require('tqTimerCaller_t')
require('tqFixTimer_t')
require('tqDirtyWordChecker_t')
require('tqExchangeHandler_t')
require('tqCltLogHandler_t')
require('tqPaymentHandler_t')
require('tqProxyServer_t')
require('tqQueryGoldHandler_t')
require('tqGetBuyTokenHandler_t')
require('tqDealResultHandler_t')
require('tqYellowDiamondHandler_t')
require('tqResultBuyHandler_t')
require('tqPlayerBuyLimiter_t')
require('tqClientCfgHandler_t')
require('tqAutoBuildsHandler_t')
require('tqBlueDiamondHandler_t')
require('tqQueryUserExistHandler_t')
require('tqDealResult32WanHandler_t')
require('tqOsGmHandler_t')
require('tqCDKeyHandler_t')
require('tqWorldBossDlgHandler_t')
require('tqCollector_t')
require('tqOpenSvrAct_t')
require('tqSendRewardHandler_t')
require('tqInvalidDataChecker_t')
--<insert require before>

app = app_t:new()
require('tqGameRoot')
GameRoot:run(app)

local suite = TestSuite:new()
tqString_t_main(suite)
tqItemResUtil_t_main(suite)
tqWUtil_t_main(suite)
tqPlayers_t_main(suite)
tqMsgSender_t_main(suite)
tqExpend_t_main(suite)
tqRoleBaseHandler_t_main(suite)
tqStrategyHandler_t_main(suite)
tqCreateRoleHandler_t_main(suite)
tqPkgHandler_t_main(suite)
tqLoginHandler_t_main(suite)
tqBuildResHandler_t_main(suite)
tqCityResHandler_t_main(suite) 
tqSysCommander_t_main(suite)
tqUseItemHandler_t_main(suite)
tqEffector_t_main(suite)
tqTimerHdr_t_main(suite) 
tqFarmResHandler_t_main(suite)
tqAlliances_t_main(suite)
tqHeroResHandler_t_main(suite)
tqUseTarget_t_main(suite)
tqSoldierResHandler_t_main(suite)
tqCultureHandler_t_main(suite)
tqMilitaryHandler_t_main(suite)
tqCityManager_t_main(suite)
tqExpeditionHdr_t_main(suite)
tqExpeditionTimerHdr_t_main(suite)
tqFightHdr_t_main(suite)
tqFieldHero_t_main(suite)
tqDropItemUtil_t_main(suite)
tqPlayerMgr_t_main(suite)
tqExpedReturnTimerHdr_t_main(suite)
tqUUIDMgr_t_main(suite)
tqMailMgr_t_main(suite)
tqFightResultMaker_t_main(suite)
tqFieldPlayer_t_main(suite)
tqPlayerCityDef_t_main(suite)
tqPlayerWall_t_main(suite)
tqFieldHeroMgr_t_main(suite)
tqArmyMgr_t_main(suite)
tqTowerPlayer_t_main(suite)  
tqFightResult_t_main(suite)
tqPlayerSelfField_t_main(suite)
tqCopyFieldPlayer_t_main(suite)
tqArmyContainer_t_main(suite)
tqArmyPlayerGetter_t_main(suite)
tqArmyCampActorsGetter_t_main(suite)
tqFieldArmyContainer_t_main(suite)
tqOwnerFieldPlayer_t_main(suite)
tqFieldCollector_t_main(suite)
tqEnemyContainer_t_main(suite)
tqFavoriteContainer_t_main(suite)
tqSelfFieldChecker_t_main(suite)
tqFieldLevelRefresher_t_main(suite)
tqCityPosPlayer_t_main(suite)
tqSelfFieldHandler_t_main(suite)
tqCultureEffectMgr_t_main(suite)
tqSoldierActor_t_main(suite)
tqSoldierAttrHelper_t_main(suite)
tqDBConn_t_main(suite)
tqHeroActor_t_main(suite)
tqFightActor_t_main(suite)
tqWallActorProxy_t_main(suite)
tqCityDefActor_t_main(suite)
tqCampActorInfoSetterForDebug_t_main(suite)
tqHeroAttrHelper_t_main(suite)
tqUtil_t_main(suite)
tqHero_t_main(suite)
tqPlayerHeroMgr_t_main(suite)
tqPlayerFarm_t_main(suite)
tqPlayerCityRes_t_main(suite)
tqStateContainer_t_main(suite)
tqState_t_main(suite)
tqMailHandler_t_main(suite)
tqCppPlayerVar_t_main(suite)
tqHeroWear_t_main(suite)
tqItemEx_t_main(suite)
tqPlayerPackage_t_main(suite)
tqMapCppArrayList_t_main(suite)
tqMapCppSet_t_main(suite)
tqMail_t_main(suite) 
tqNetCmdHerosHdr_t_main(suite)
tqShopHandler_t_main(suite)
tqItemOpHandler_t_main(suite)
tqGemUtil_t_main(suite)
tqOutFieldHandler_t_main(suite)
tqBaseCmdHandler_t_main(suite)
tqPlayerFightRefState_t_main(suite)
tqFriendHandler_t_main(suite)
tqPlayerFriendMgr_t_main(suite)
tqSkillEffectUtil_t_main(suite)
tqWorldBlessQueue_t_main(suite)
tqPlayerCultures_t_main(suite)
tqHeroSteel_t_main(suite)
tqGameApp_t_main(suite)
tqCityDefHandler_t_main(suite)
tqExpendResMaker_t_main(suite)
tqTowerHandler_t_main(suite)
tqExchangeExpHandler_t_main(suite)
tqOut_t_main(suite)
tqFightRefStateHandler_t_main(suite)
tqBriefPlayer_t_main(suite)
tqRoleStateHandler_t_main(suite)
tqChatHandler_t_main(suite)
tqWorldMsgQueue_t_main(suite)
tqAllianceHandler_t_main(suite)
tqValidChecker_t_main(suite)
tqSet_t_main(suite)
tqOtherPlayerInfoHdr_t_main(suite)
tqTradingArea_t_main(suite)
tqTradingAreaHdr_t_main(suite)
tqExileRolesRefresher_t_main(suite)
tqActTowerHdr_t_main(suite)
tqPlayerActTower_t_main(suite)
tqActTowerRank_t_main(suite)
tqActTerraceHdr_t_main(suite)
tqPlayerActTerrace_t_main(suite)
tqStateCityHandler_t_main(suite)
tqPlayerTask_t_main(suite)
tqTaskHandler_t_main(suite)
tqTaskFinisher_t_main(suite)
tqActivityValHandler_t_main(suite)
tqServerActEffect_t_main(suite)
tqRoleRank_t_main(suite)
tqRankHdrTemplet_t_main(suite)
tqNewcomerHelperHdr_t_main(suite)
tqFightStateRepository_t_main(suite)
tqPlayerClientCfg_t_main(suite)
tqItemHandler_t_main(suite)
tqTimerEx_t_main(suite)
tqTimerCaller_t_main(suite)
tqFixTimer_t_main(suite)
tqDirtyWordChecker_t_main(suite)
tqExchangeHandler_t_main(suite)
tqCltLogHandler_t_main(suite)
tqPaymentHandler_t_main(suite)
tqProxyServer_t_main(suite)
tqQueryGoldHandler_t_main(suite)
tqGetBuyTokenHandler_t_main(suite)
tqDealResultHandler_t_main(suite)
tqYellowDiamondHandler_t_main(suite)
tqResultBuyHandler_t_main(suite)
tqPlayerBuyLimiter_t_main(suite)
tqClientCfgHandler_t_main(suite)
tqAutoBuildsHandler_t_main(suite)
tqBlueDiamondHandler_t_main(suite)
tqQueryUserExistHandler_t_main(suite)
tqDealResult32WanHandler_t_main(suite)
tqOsGmHandler_t_main(suite)
tqCDKeyHandler_t_main(suite)
tqWorldBossDlgHandler_t_main(suite)
tqService_t_main(suite)
tqCollector_t_main(suite)
tqOpenSvrAct_t_main(suite)
tqSendRewardHandler_t_main(suite)
tqInvalidDataChecker_t_main(suite)
--<insert case before>

local result = suite:run(nil, g_curtestcases)
print('--------------------------------------')
print(result:summary()..'   sec '..(os.clock() - lasttime) )
print('--------------------------------------')




